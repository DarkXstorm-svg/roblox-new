{
  "metadata": {
    "timestamps": {
      "start": "2026-02-18T19:59:08.518025",
      "end": "2026-02-18T19:59:08.776621",
      "duration_ms": 258
    },
    "url": {
      "full": "https://js.rbxcdn.com/ad341823901ab65d0fb347548c9075b31e7ed86976dd502476fc2081be10f2f8-NotificationPreferences.js",
      "protocol": "https",
      "domain": "js.rbxcdn.com",
      "path": "/ad341823901ab65d0fb347548c9075b31e7ed86976dd502476fc2081be10f2f8-NotificationPreferences.js",
      "normalized_path": "/ad341823901ab65d0fb347548c9075b31e7ed86976dd502476fc2081be10f2f8-NotificationPreferences.js",
      "query": {}
    },
    "method": "GET",
    "status_code": 200,
    "size": {
      "request_bytes": 0,
      "response_bytes": 10471,
      "compressed": true
    },
    "content_type": "application/javascript",
    "cache_status": "public, max-age=31536000"
  },
  "request": {
    "headers": {
      "sec-ch-ua-platform": "\"Linux\"",
      "user-agent": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36",
      "sec-ch-ua": "\"Not(A:Brand\";v=\"8\", \"Chromium\";v=\"144\", \"Google Chrome\";v=\"144\"",
      "sec-ch-ua-mobile": "?0",
      "accept": "*/*",
      "sec-fetch-site": "cross-site",
      "sec-fetch-mode": "no-cors",
      "sec-fetch-dest": "script",
      "sec-fetch-storage-access": "none",
      "referer": "https://www.roblox.com/",
      "accept-encoding": "gzip, deflate, br, zstd",
      "accept-language": "en-US,en;q=0.9,fil;q=0.8",
      "priority": "u=2"
    },
    "payload": null
  },
  "response": {
    "headers": {
      "content-type": "application/javascript",
      "date": "Wed, 14 Jan 2026 19:55:17 GMT",
      "last-modified": "Fri, 12 Dec 2025 18:18:00 GMT",
      "content-encoding": "gzip",
      "x-amz-server-side-encryption": "AES256",
      "cache-control": "public, max-age=31536000",
      "x-amz-version-id": "3howM0bNombCa4l.ZAVjhlnb9dZNMJ8_",
      "server": "AmazonS3",
      "etag": "W/\"b4aa02141f64748a70c554820b26fdd1\"",
      "vary": "accept-encoding, Origin",
      "x-cache": "Hit from cloudfront",
      "via": "1.1 1b7c94274bd830ddf26396883b21ed8a.cloudfront.net (CloudFront)",
      "x-amz-cf-pop": "MNL51-P1",
      "x-amz-cf-id": "rLQSUMjB5hFCd-9zwdR5LWSZDrSEAgiPst2br2wcCv7k6zqAFedtoA==",
      "age": "2995433",
      "rbx-cdn-provider": "aws",
      "timing-allow-origin": "*",
      "nel": "{\"report_to\":\"network-errors\",\"max_age\":604800,\"success_fraction\":0,\"failure_fraction\":0.05,\"response_headers\":[\"Rbx-Cdn-Provider\",\"vary\"]}",
      "report-to": "{\"group\":\"network-errors\",\"max_age\":604800,\"endpoints\":[{\"url\":\"https://ncs.roblox.com/upload\"}]}",
      "server-timing": "cdn-cache-hit,cdn-pop;desc=\"MNL51-P1\",cdn-rid;desc=\"rLQSUMjB5hFCd-9zwdR5LWSZDrSEAgiPst2br2wcCv7k6zqAFedtoA==\",cdn-hit-layer;desc=\"EDGE\",cdn-downstream-fbl;dur=0"
    },
    "body": "/*! For license information please see notificationPreferences.bundle.min.js.LICENSE.txt */\n!function(){var e={9870:function(e,t){var n;!function(){\"use strict\";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if(\"string\"===o||\"number\"===o)e.push(n);else if(Array.isArray(n)){if(n.length){var a=i.apply(null,n);a&&e.push(a)}}else if(\"object\"===o){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes(\"[native code]\")){e.push(n.toString());continue}for(var l in n)r.call(n,l)&&n[l]&&e.push(l)}}}return e.join(\" \")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){\"use strict\";var e=Roblox,t=n.n(e),r=React,i=n.n(r),o=ReactDOM,a=ReactUtilities,l=ReactStyleGuide,c=CoreUtilities,s=CoreRobloxUtilities,u=s.eventStreamService.eventTypes,f=\"NotificationPreferences\",d={NotificationPreferencesOrigin:\"NotificationPreferences\",pageLoaded:{name:\"pageLoaded\",context:f,type:u.pageLoad,params:{}},enableNotificationsPromptShown:{name:\"enableNotificationsPromptShown\",context:f,type:u.formInteraction,params:{btn:\"enableMobilePushNotifications\",aType:\"shown\"}},enableNotificationsPromptClicked:{name:\"enableNotificationsPromptClicked\",context:f,type:u.formInteraction,params:{btn:\"enableMobilePushNotifications\",aType:\"click\"}},categoryToggle:{name:\"categoryToggle\",context:f,type:u.formInteraction,params:{btn:\"toggleCategoryShown\",aType:\"click\"}},sendAll:{name:\"sendAll\",context:f,type:u.formInteraction,params:{btn:\"sendAll\",aType:\"click\"}},sendBest:{name:\"sendBest\",context:f,type:u.formInteraction,params:{btn:\"sendBest\",aType:\"click\"}},sendNone:{name:\"sendNone\",context:f,type:u.formInteraction,params:{btn:\"sendNone\",aType:\"click\"}},promptUnsubscribe:{name:\"promptUnsubscribe\",context:f,type:u.formInteraction,params:{btn:\"promptUnsubscribe\",aType:\"click\"}},unsubscribeFromExperience:{name:\"unsubscribeFromExperience\",context:f,type:u.formInteraction,params:{btn:\"unsubscribeFromExperience\",aType:\"click\"}},cancelUnsubscribe:{name:\"cancelUnsubscribe\",context:f,type:u.formInteraction,params:{btn:\"cancelUnsubscribe\",aType:\"click\"}}},p={notificationPreferencesUrl:{url:e.EnvironmentUrls.notificationApi+\"/v2/notifications/notification-preferences\",retryable:!0,withCredentials:!0},groupedNotificationPreferences:{url:e.EnvironmentUrls.notificationApi+\"/v2/notifications/grouped-notification-preferences\",retryable:!0,withCredentials:!0},experiencePreferencesUrl:{url:e.EnvironmentUrls.notificationApi+\"/v2/notifications/experience-preferences\",retryable:!0,withCredentials:!0},gameDetailsUrl:{url:e.EnvironmentUrls.gamesApi+\"/v1/games\",retryable:!0,withCredentials:!0},pushEnabledUrl:{url:e.EnvironmentUrls.notificationApi+\"/v2/push-notifications/get-current-device-destination\",retryable:!0,withCredentials:!0},followingsUrl:function(t,n){return{url:e.EnvironmentUrls.followingsApi+\"/v1/users/\"+t+\"/universes/\"+n,retryable:!1,withCredentials:!0}},groupShoutPreferencesUrl:{url:e.EnvironmentUrls.notificationApi+\"/v2/notifications/group-shout-preferences\",retryable:!0,withCredentials:!0},updateGroupShoutNotificationPreferencesUrl:function(t){return{url:e.EnvironmentUrls.groupsApi+\"/v1/groups/\"+t+\"/notification-preference\",retryable:!0,withCredentials:!0}},getGroupShoutNotificationGroupsUrl:function(t){return{url:e.EnvironmentUrls.groupsApi+\"/v1/users/\"+t+\"/groups/roles?includeNotificationPreferences=true\",retryable:!0,withCredentials:!0}},updateUserSetting:{url:e.EnvironmentUrls.userSettingsApi+\"/v1/user-settings\",retryable:!0,withCredentials:!0},updateUserSettingV2:{url:e.EnvironmentUrls.userSettingsApi+\"/v2/user-settings\",retryable:!0,withCredentials:!0}},m=function(){return m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},m.apply(this,arguments)},b=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function l(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}c((r=r.apply(e,t||[])).next())}))},v=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},\"function\"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError(\"Generator is already executing.\");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},h=function(e){return b(void 0,void 0,Promise,(function(){var t;return v(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,c.httpService.get(p.gameDetailsUrl,e)];case 1:return 200!==(t=n.sent()).status?[2,null]:[2,t.data];case 2:return n.sent(),[2,null];case 3:return[2]}}))}))},g=function(e){return b(void 0,void 0,Promise,(function(){var t;return v(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,c.httpService.get(p.getGroupShoutNotificationGroupsUrl(e),{})];case 1:return 200!==(t=n.sent()).status?[2,null]:[2,t.data];case 2:return n.sent(),[2,null];case 3:return[2]}}))}))},y=function(e,t,n){s.eventStreamService.sendEventWithTarget(e.type,e.context,m(m({},e.params),{field:t||\"\",origin:n||d.NotificationPreferencesOrigin}))},E=function(e,t){return b(void 0,void 0,Promise,(function(){var n;return v(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),n=p.followingsUrl(e,t),[4,c.httpService.delete(n,{})];case 1:return 200===r.sent().status?[2,!0]:[2,!1];case 2:return r.sent(),[2,!1];case 3:return[2]}}))}))},N=function(e,t,n){return b(void 0,void 0,Promise,(function(){var r;return v(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),r=p.updateGroupShoutNotificationPreferencesUrl(e),[4,c.httpService.patch(r,{notificationsEnabled:t,type:n})];case 1:return 200===i.sent().status?[2,!0]:[2,!1];case 2:return i.sent(),[2,!1];case 3:return[2]}}))}))},w={common:[\"CommonUI.Messages\",\"CommonUI.Controls\",\"Feature.DoNotDisturb\"],feature:\"Notifications.Preferences\"},S=function(){return S=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},S.apply(this,arguments)};function x(e){var t,n,r=\"\";if(\"string\"==typeof e||\"number\"==typeof e)r+=e;else if(\"object\"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=x(e[t]))&&(r&&(r+=\" \"),r+=n)}else for(n in e)e[n]&&(r&&(r+=\" \"),r+=n);return r}var P,T,C,D=function(){for(var e,t,n=0,r=\"\",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=x(e))&&(r&&(r+=\" \"),r+=t);return r},k={XSmall:\"size-[var(--icon-size-xsmall)]\",Small:\"size-[var(--icon-size-small)]\",Medium:\"size-[var(--icon-size-medium)]\",Large:\"size-[var(--icon-size-large)]\",XLarge:\"size-[var(--icon-size-xlarge)]\"},M=i().forwardRef((function(e,t){var n=e.name,r=e.size,o=void 0===r?\"Medium\":r,a=e.className;e.children;var l=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,[\"name\",\"size\",\"className\",\"children\"]);return i().createElement(\"span\",S({ref:t,role:\"presentation\",className:D(\"grow-0 shrink-0 basis-auto icon\",n,k[o],a)},l))}));M.displayName=\"Icon\",function(e){e.All=\"All\",e.Best=\"Personalized\",e.None=\"None\"}(P||(P={})),function(e){e.Push=\"Push\",e.Stream=\"Stream\",e.Invalid=\"Invalid\"}(T||(T={})),function(e){e.Announcements=\"AnnouncementCreatedNotification\",e.Comments=\"ForumCommentCreatedNotification\",e.Replies=\"ForumCommentReplyCreatedNotification\"}(C||(C={}));var U,A,z,G,I,B,L=(0,a.withTranslations)((function(e){var t=e.translate;return i().createElement(\"div\",{className:\"group-locked-pill xsmall \"},i().createElement(\"span\",{className:\"icon-status-private themified-icon\"}),i().createElement(\"span\",{className:\"group-locked-label\"},t(\"Label.ParentalControls\")))}),w),O=n(9870),F=n.n(O),j=function(e){var t=e.selectionDisabled,n=e.onChangeCallback,r=e.selection,o=F()(\"btn-toggle receiver-destination-type-toggle\",{on:r});return i().createElement(\"button\",{type:\"button\",role:\"switch\",disabled:t,\"aria-checked\":r,\"aria-label\":\"toggle-button\",className:o,onClick:function(){n&&n(!r)}},i().createElement(\"span\",{className:\"toggle-flip\"}),i().createElement(\"span\",{id:\"toggle-on\",className:\"toggle-on\"}),i().createElement(\"span\",{id:\"toggle-off\",className:\"toggle-off\"}))},H=function(e){var t=e.userSettingName,n=e.userSetting,r=e.localizedTypeName,o=e.localizedDescription,a=e.selection,l=e.onTogglePreference,c=e.hasBorder,s=e.selectionDisabled,u=e.showLockOnToggle,f=e.renderAdditionalContent;return i().createElement(\"div\",{className:\"preference-selector\"},i().createElement(\"div\",{className:F()(\"preference-selector-header\",{\"border-top\":c})},i().createElement(\"div\",{className:F()(\"notification-type-info\",{\"text-disabled\":s})},i().createElement(\"div\",{className:\"notification-type heading text text-emphasis\"},r),i().createElement(\"div\",{className:\"notification-type-descriptor small text text-content\"},o)),i().createElement(\"div\",{className:\"toggle-button-container\"},u&&i().createElement(L,null),i().createElement(j,{selectionDisabled:s,onChangeCallback:function(e){l(e,n,null!=t?t:null)},selection:a}))),i().createElement(\"div\",{className:F()({\"text-disabled\":s})},null==f?void 0:f()))},W=RobloxThumbnails,R=function(e){var t=e.titleText,n=e.bodyComponent,o=e.actionButtonText,a=e.onAction,c=e.neutralButtonText,s=e.onNeutral,u=e.closeable,f=void 0===u||u,d=e.disableActionButton,p=void 0!==d&&d,m=(0,r.useState)(!1),b=m[0],v=m[1],h=F()({\"info-modal-half-width-button\":c,\"info-modal-full-width-button\":!c}),g=(0,r.useMemo)((function(){return{open:function(){return v(!0)},close:function(){return v(!1)}}}),[]);return[i().createElement(l.Modal,{show:b,onHide:function(){g.close()},backdrop:!!f||\"static\",keyboard:f,className:\"confirmation-modal\",size:\"sm\",\"aria-labelledby\":\"info-modal-title\",scrollable:!0,centered:!0,closeable:f},i().createElement(l.Modal.Header,{useBaseBootstrapComponent:!0},i().createElement(\"div\",null,i().createElement(l.Modal.Title,{id:\"info-modal-title\"},t))),i().createElement(l.Modal.Body,null,n),i().createElement(l.Modal.Footer,null,c&&i().createElement(l.Button,{className:h,variant:l.Button.variants.secondary,size:l.Button.sizes.medium,onClick:function(){null==s||s(),g.close()}},c),i().createElement(l.Button,{className:h,variant:l.Button.variants.primary,size:l.Button.sizes.medium,isDisabled:p,onClick:function(){null==a||a(),g.close()}},o))),g]};!function(e){e.doNotDisturbTimeWindow=\"doNotDisturbTimeWindow\",e.doNotDisturb=\"doNotDisturb\",e.allowMarketingEmailNotifications=\"allowMarketingEmailNotifications\"}(U||(U={})),function(e){e.doNotDisturbTimeWindow=\"doNotDisturbTimeWindow\"}(A||(A={})),function(e){e.Invalid=\"Invalid\",e.Enabled=\"Enabled\",e.Disabled=\"Disabled\"}(z||(z={})),function(e){e.experience=\"Experience\",e.groupShout=\"GroupShout\",e.default=\"Default\"}(B||(B={}));var V={GroupToIconMap:{Experiences:\"icon-regular-circle-play\",MobilePush:\"icon-regular-smartphone-portrait\",GroupShouts:\"icon-regular-three-people\",Email:\"icon-regular-envelope\",Desktop:\"icon-regular-mouse-scrollwheel\"},GroupToThumbnailType:{GroupShout:W.ThumbnailTypes.groupIcon,Experience:W.ThumbnailTypes.gameIcon},NotificationTypeToUserSetting:{MarketingEmails:U.allowMarketingEmailNotifications},UserSettingToSurface:(G={},G[U.allowMarketingEmailNotifications]=\"email-marketing-setting\",G),UserSettingToConsentName:(I={},I[U.allowMarketingEmailNotifications]=\"allowMarketingEmailNotificationsPreferences\",I)},X=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function l(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}c((r=r.apply(e,t||[])).next())}))},_=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},\"function\"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError(\"Generator is already executing.\");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},Y=function(e){var t=e.entityId,n=e.entityName,o=e.entityType,a=e.truncatedEntityName,c=e.entityCreatorName,s=e.hasBorder,u=e.hasToggle,f=e.initToggle,p=e.unsubscribeCallback,m=e.selectionDisabled,b=e.translate,v=(0,r.useState)(!!f),h=v[0],g=v[1],E=(0,l.createSystemFeedback)(),N=E[0],w=E[1],S=function(e){return X(void 0,void 0,void 0,(function(){return _(this,(function(n){switch(n.label){case 0:return e||y(d.promptUnsubscribe,t.toString()),[4,p(e)];case 1:return n.sent()?g(e):w.warning(b(\"Message.ErrorGeneral\")),[2]}}))}))},x=R({titleText:b(\"Heading.AreYouSure\"),bodyComponent:b(\"Body.TurnOffExperienceNotifications\",{experienceName:a}),actionButtonText:b(\"Action.TurnOff\"),neutralButtonText:b(\"Action.Cancel\"),onAction:function(){return S(!1)}}),P=x[0],T=x[1];return i().createElement(\"div\",{className:F()(\"preference-button-wrapper\",{\"border-top\":s,\"text-disabled\":m})},i().createElement(\"div\",{className:\"preference-button \"},i().createElement(W.Thumbnail2d,{type:V.GroupToThumbnailType[o],size:W.DefaultThumbnailSize,format:W.ThumbnailFormat.webp,targetId:t,containerClass:\"preference-thumbnail\"}),i().createElement(\"div\",{className:\"preference-info-wrapper\"},i().createElement(\"div\",{className:\"small text text-emphasis preference-name\"},n),i().createElement(\"div\",{className:\"small text text-content\"},c)),(null==u||u)&&i().createElement(\"div\",{className:\"toggle-button-container\",\"data-testid\":\"toggle-button-container\"},i().createElement(j,{onChangeCallback:function(e){return X(void 0,void 0,void 0,(function(){return _(this,(function(t){switch(t.label){case 0:return e?[3,1]:(T.open(),[3,3]);case 1:return[4,S(e)];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},selection:h,selectionDisabled:m}))),i().createElement(N,null),P)},q=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function l(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}c((r=r.apply(e,t||[])).next())}))},J=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},\"function\"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError(\"Generator is already executing.\");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},K=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},Q=(0,r.createContext)({experienceDataList:[],showMore:function(){},initGroupExperiencePreferencesList:function(e){return Promise.resolve()},canShowMore:!1,updateExperiencePreferences:function(e,t){return Promise.resolve(!1)},isFetchingGamesInfo:!1}),Z=function(){return(0,r.useContext)(Q)},$=function(t){var n=t.children,o=(0,r.useState)([]),a=o[0],l=o[1],s=(0,r.useState)([]),u=s[0],f=s[1],d=(0,r.useState)(!1),m=d[0],g=d[1],y=(0,r.useState)(!1),N=y[0],w=y[1],S=(0,r.useCallback)((function(e){return q(void 0,void 0,Promise,(function(){var t,n;return J(this,(function(r){switch(r.label){case 0:return w(!0),[4,h({universeIds:e.map((function(e){return e.toString()}))})];case 1:return(t=r.sent())?(n=null==t?void 0:t.data.map((function(e){return{experienceName:e.name,truncatedExperienceName:(t=e.name,n=100,t.length>n?t.slice(0,n)+\"...\":t),experienceCreator:e.creator.name,id:e.id,enabled:!0};var t,n})),w(!1),[2,n]):(w(!1),[2,null])}}))}))}),[w,h]),x=function(e,t){var n=u.indexOf(e);if(n>-1){var r=K([],u);r[n]=t,f(r)}},P={experienceDataList:u,showMore:function(){return q(void 0,void 0,Promise,(function(){var e,t;return J(this,(function(n){switch(n.label){case 0:return m?((e=u.length+10)>=a.length&&g(!1),[4,S(a.slice(u.length,e))]):[3,2];case 1:(t=n.sent())&&f(K(K([],u),t)),n.label=2;case 2:return[2]}}))}))},initGroupExperiencePreferencesList:function(e){return q(void 0,void 0,Promise,(function(){var t;return J(this,(function(n){switch(n.label){case 0:return e.notificationsEnabledExperiences?(l(e.notificationsEnabledExperiences),[4,S(e.notificationsEnabledExperiences.slice(0,10))]):[3,2];case 1:(t=n.sent())&&(f(K(K([],u),t)),g(e.notificationsEnabledExperiences.length>10)),n.label=2;case 2:return[2]}}))}))},canShowMore:m,updateExperiencePreferences:function(t,n){return q(void 0,void 0,Promise,(function(){var r,i,o;return J(this,(function(a){switch(a.label){case 0:return n?[4,(l=e.CurrentUser.userId,s=t.id.toString(),b(void 0,void 0,Promise,(function(){var e;return v(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),e=p.followingsUrl(l,s),[4,c.httpService.post(e,{})];case 1:return 200===t.sent().status?[2,!0]:[2,!1];case 2:return t.sent(),[2,!1];case 3:return[2]}}))})))]:[3,2];case 1:return(r=a.sent())&&(o={experienceName:t.experienceName,truncatedExperienceName:t.truncatedExperienceName,experienceCreator:t.experienceCreator,id:t.id,enabled:!0},x(t,o)),[2,r];case 2:return[4,E(e.CurrentUser.userId,t.id.toString())];case 3:return(i=a.sent())&&(o={experienceName:t.experienceName,truncatedExperienceName:t.truncatedExperienceName,experienceCreator:t.experienceCreator,id:t.id,enabled:!1},x(t,o)),[2,i]}var l,s}))}))},isFetchingGamesInfo:N};return i().createElement(Q.Provider,{value:P},n)},ee=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function l(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}c((r=r.apply(e,t||[])).next())}))},te=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},\"function\"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError(\"Generator is already executing.\");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},ne=(0,a.withTranslations)((function(e){var t=e.translate,n=e.localizedDescription,r=e.parentalControlsEnabled,o=Z(),a=o.updateExperiencePreferences,c=o.canShowMore,s=o.showMore,u=o.isFetchingGamesInfo,f=o.experienceDataList,d=f.map((function(e,n){return i().createElement(Y,{key:e.id,hasBorder:0!==n,entityId:e.id,entityName:e.experienceName,truncatedEntityName:e.truncatedExperienceName,entityCreatorName:t(\"Label.CreatedBy\",{creator:e.experienceCreator}),unsubscribeCallback:function(t){return ee(void 0,void 0,void 0,(function(){return te(this,(function(n){return[2,(r=e,i=t,ee(void 0,void 0,void 0,(function(){return te(this,(function(e){return[2,a(r,i)]}))})))];var r,i}))}))},initToggle:e.enabled,translate:t,entityType:B.experience,selectionDisabled:r})}));return i().createElement(\"div\",{className:\"preference-selector\"},i().createElement(\"div\",{className:\"notification-type-info\"},i().createElement(\"div\",{className:\"notification-descriptor small text text-content\"},n)),i().createElement(\"div\",null,d),i().createElement(\"div\",null,u?i().createElement(l.Loading,null):null,c&&i().createElement(l.Button,{className:\"load-more-button btn-secondary-md\",onClick:s},t(\"Action.ShowMore\"))))}),w),re=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function l(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}c((r=r.apply(e,t||[])).next())}))},ie=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},\"function\"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError(\"Generator is already executing.\");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},oe=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},ae=(0,r.createContext)({groupShoutDataList:[],showMore:function(){},initGroupShoutPreferencesList:function(e){return Promise.resolve()},canShowMore:!1,updateGroupShoutPreferences:function(e,t,n){return Promise.resolve(!1)},isFetchingGroupsInfo:!1}),le=function(){return(0,r.useContext)(ae)},ce=function(t){var n=t.children,o=(0,r.useState)([]),a=o[0],l=o[1],c=(0,r.useState)([]),s=c[0],u=c[1],f=(0,r.useState)(!1),d=f[0],p=f[1],m=(0,r.useState)(!1),b=m[0],v=m[1],h=(0,r.useCallback)((function(){return re(void 0,void 0,Promise,(function(){var t,n;return ie(this,(function(r){switch(r.label){case 0:return v(!0),[4,g(e.CurrentUser.userId)];case 1:return(t=r.sent())?(n=t.data.map((function(e){var t,n,r;return{groupName:e.group.name,truncatedGroupName:(n=e.group.name,r=100,n.length>r?n.slice(0,r)+\"...\":n),creatorName:null===(t=e.group.owner)||void 0===t?void 0:t.displayName,groupId:e.group.id,notificationPreferences:e.notificationPreferences}})),v(!1),[2,n]):(v(!1),[2,null])}}))}))}),[v,g]),y={groupShoutDataList:s,showMore:function(){if(d){var e=s.length+10;e>=a.length&&p(!1);var t=a.slice(s.length,e);u(oe(oe([],s),t))}},initGroupShoutPreferencesList:function(e){return re(void 0,void 0,Promise,(function(){var t,n;return ie(this,(function(r){switch(r.label){case 0:return e.notificationsEnabledGroups?[4,h()]:[3,2];case 1:(t=r.sent())&&(l(t),n=t.slice(0,10),u(oe(oe([],s),n)),p(t.length>10)),r.label=2;case 2:return[2]}}))}))},canShowMore:d,updateGroupShoutPreferences:function(e,t,n){return re(void 0,void 0,Promise,(function(){var r,i,o,a,l;return ie(this,(function(c){switch(c.label){case 0:return r=e.groupId.toString(),[4,N(r,t,n)];case 1:return i=c.sent(),o=oe([],e.notificationPreferences),(a=o.find((function(e){return e.type===n})))?(a.enabled=t,i&&(l={groupName:e.groupName,truncatedGroupName:e.truncatedGroupName,creatorName:e.creatorName,groupId:e.groupId,notificationPreferences:o},function(e,t){var n=s.indexOf(e);if(n>-1){var r=oe([],s);r[n]=t,u(r)}}(e,l)),[2,i]):[2,!1]}}))}))},isFetchingGroupsInfo:b};return i().createElement(ae.Provider,{value:y},n)},se=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function l(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}c((r=r.apply(e,t||[])).next())}))},ue=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},\"function\"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError(\"Generator is already executing.\");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},fe=(0,a.withTranslations)((function(e){var t=e.translate,n=e.localizedDescription,r=e.parentalControlsEnabled,o=le(),a=o.updateGroupShoutPreferences,c=o.canShowMore,s=o.showMore,u=o.isFetchingGroupsInfo,f=o.groupShoutDataList,d=f.map((function(e,n){var o;return i().createElement(i().Fragment,null,i().createElement(Y,{key:e.groupId,hasBorder:0!==n,entityId:e.groupId,entityName:e.groupName,truncatedEntityName:e.truncatedGroupName,entityCreatorName:t(\"Label.CreatedBy\",{creator:e.creatorName}),hasToggle:!1,unsubscribeCallback:function(){return Promise.resolve(!1)},initToggle:!1,translate:t,entityType:B.groupShout,selectionDisabled:r}),null===(o=e.notificationPreferences)||void 0===o?void 0:o.map((function(t){return i().createElement(H,{localizedTypeName:t.name,localizedDescription:t.description,selection:t.enabled,onTogglePreference:function(n){return se(void 0,void 0,void 0,(function(){return ue(this,(function(r){return[2,(i=e,o=n,l=t.type,se(void 0,void 0,void 0,(function(){return ue(this,(function(e){return[2,a(i,o,l)]}))})))];var i,o,l}))}))},selectionDisabled:r})})))}));return i().createElement(\"div\",{className:\"preference-selector\"},i().createElement(\"div\",{className:\"notification-type-info\"},i().createElement(\"div\",{className:\"notification-descriptor small text text-content\"},n)),i().createElement(\"div\",null,d),i().createElement(\"div\",null,u?i().createElement(l.Loading,null):null,c&&i().createElement(l.Button,{className:\"load-more-button btn-secondary-md\",onClick:s},t(\"Action.ShowMore\"))))}),w),de=function(e){var t=e.localizedDescription,n=e.timeString,r=e.selectionDisabled,o=e.onClick;return i().createElement(\"div\",{className:\"preference-selector\"},i().createElement(\"div\",{className:F()(\"preference-selector-header\",{\"text-disabled\":r})},i().createElement(\"div\",{className:\"notification-type-info\"},i().createElement(\"div\",{className:\"notification-type-descriptor small text text-content\"},t)),i().createElement(\"button\",{className:\"time-preference-selector-button\",type:\"button\",disabled:r,onClick:o},i().createElement(\"span\",{className:\"small text text-content\"},n),i().createElement(\"span\",{className:\"icon-chevron-heavy-right\"}))))},pe=function(e,t,n){var r=Math.max(0,Math.min(1439,e)),i=Math.floor(r/60),o=i>=12;return(0===i?12:i>12?i-12:i)+\":\"+(r%60).toString().padStart(2,\"0\")+\" \"+(o?n:t)},me=function(e){var t=Math.max(0,Math.min(1439,e)),n=Math.floor(t/60);return{hour:0===n?12:n>12?n-12:n,minute:t%60,isPM:n>=12}},be=function(){return be=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},be.apply(this,arguments)},ve=function(e,t,n,o,a,c){var s=(0,r.useState)({hour:12,minute:0,isPM:!1}),u=s[0],f=s[1],d=(0,r.useState)(void 0),p=d[0],m=d[1];(0,r.useEffect)((function(){if(e>=0){var t=me(e);f(t)}}),[e]);var b,v,h,g,y=function(e,t){var n=be({},u);\"hour\"===e?n.hour=Number(t):\"minute\"===e?n.minute=Number(t):\"ampm\"===e&&(n.isPM=\"PM\"===t),f(n),m(void 0)},E=!p,N=(b=u.hour,v=u.minute,h=u.isPM,g=b,h&&12!==b?g+=12:h||12!==b||(g=0),60*g+v),w=function(){for(var e=[],t=1;t<=12;t++)e.push({label:t.toString(),value:t.toString()});return e}(),S=function(){for(var e=[],t=0;t<60;t+=15){var n=t.toString().padStart(2,\"0\");e.push({label:n,value:t.toString()})}return e}(),x=function(e,t){return[{label:e,value:\"AM\"},{label:t,value:\"PM\"}]}(a,c),P=i().createElement(i().Fragment,null,i().createElement(\"div\",{id:\"time-dropdown\",className:\"time-container form-group\"},i().createElement(\"div\",{className:\"time-dropdown-row\"},i().createElement(\"div\",{className:\"time-dropdown-item\"},i().createElement(\"label\",{className:\"time-dropdown-label\",htmlFor:\"hour-dropdown\"},t),i().createElement(l.NativeDropdown,{id:\"hour-dropdown\",selectedItemvalue:u.hour.toString(),selectionItems:w,className:F()(\"rbx-select-group time-select-group\"),onChange:function(e){var t=e.target.value;y(\"hour\",t)}})),i().createElement(\"div\",{className:\"time-dropdown-item\"},i().createElement(\"label\",{className:\"time-dropdown-label\",htmlFor:\"minute-dropdown\"},n),i().createElement(l.NativeDropdown,{id:\"minute-dropdown\",selectedItemvalue:u.minute.toString(),selectionItems:S,className:F()(\"rbx-select-group time-select-group\"),onChange:function(e){var t=e.target.value;y(\"minute\",t)}})),i().createElement(\"div\",{className:\"time-dropdown-item\"},i().createElement(\"label\",{className:\"time-dropdown-label\",htmlFor:\"ampm-dropdown\"},o),i().createElement(l.NativeDropdown,{id:\"ampm-dropdown\",selectedItemvalue:u.isPM?\"PM\":\"AM\",selectionItems:x,className:F()(\"rbx-select-group time-select-group\"),onChange:function(e){var t=e.target.value;y(\"ampm\",t)}})))),p&&i().createElement(\"p\",{className:\"text-error form-control-label modal-error-message\"},p));return[N,P,function(e){if(e>=0){var t=me(e);f(t)}m(void 0)},E]},he=function(e){var t=e.titleText,n=e.bodyText,r=e.actionButtonText,o=e.onAction,a=e.neutralButtonText,l=e.closeable,c=void 0===l||l,s=e.initTimeMinutes,u=void 0===s?0:s,f=e.translate,d=e.invalidTimeMinutes,p=ve(null!=u?u:0,f(\"Label.DoNotDisturb.Hour\"),f(\"Label.DoNotDisturb.Minute\"),f(\"Label.DoNotDisturb.AMPM\"),f(\"Label.DoNotDisturb.CapitalizedAM\"),f(\"Label.DoNotDisturb.CapitalizedPM\")),m=p[0],b=p[1],v=p[2],h=(p[3],i().createElement(\"div\",{className:\"do-not-disturb-time-container\"},i().createElement(\"div\",{className:\"text-description modal-description\"},n),b,m===d&&i().createElement(\"div\",{className:\"text-error\"},f(\"Error.TimeWindowTooShort\")))),g=R({titleText:t,bodyComponent:h,actionButtonText:r,neutralButtonText:a,closeable:c,onAction:function(){null==o||o(m)},onNeutral:function(){v(u)},disableActionButton:m===d});return[g[0],g[1]]},ge=function(){return ge=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ge.apply(this,arguments)},ye=function(e){var t=e.localizedHeading,n=e.localizedDescription,r=e.selection,o=e.selectionDisabled,a=e.startTimeMinutes,l=e.endTimeMinutes,c=e.dndEnabledByParentalControls,s=e.translate,u=e.updateUserSettings,f=e.userSettingName,d=function(e,t){var n={startTimeMinutes:e,endTimeMinutes:t};u(U.doNotDisturbTimeWindow,f?A.doNotDisturbTimeWindow:null,n)},p=he({titleText:s(\"Label.DoNotDisturb.StartTime\"),bodyText:s(\"Description.DoNotDisturbTimePicker.StartTime\"),actionButtonText:s(\"Action.Save\"),onAction:function(e){d(e,l)},neutralButtonText:s(\"Action.Cancel\"),initTimeMinutes:a,translate:s,invalidTimeMinutes:l}),m=p[0],b=p[1],v=he({titleText:s(\"Label.DoNotDisturb.EndTime\"),bodyText:s(\"Description.DoNotDisturbTimePicker.EndTime\"),actionButtonText:s(\"Action.Save\"),onAction:function(e){d(a,e)},neutralButtonText:s(\"Action.Cancel\"),initTimeMinutes:l,translate:s,invalidTimeMinutes:a}),h=v[0],g=v[1];return i().createElement(H,ge({userSetting:U.doNotDisturb,localizedTypeName:t,localizedDescription:n,onTogglePreference:function(e,t){!function(e,t){t&&u(null!=t?t:U.doNotDisturb,null!=f?f:null,e?z.Enabled:z.Disabled)}(e,t)},selection:r},r&&{renderAdditionalContent:function(){return i().createElement(i().Fragment,null,i().createElement(de,{localizedDescription:s(\"Label.DoNotDisturb.StartTime\"),timeString:pe(a,s(\"Label.DoNotDisturb.CapitalizedAM\"),s(\"Label.DoNotDisturb.CapitalizedPM\")),selectionDisabled:o,onClick:function(){b.open()}}),m,i().createElement(de,{localizedDescription:s(\"Label.DoNotDisturb.EndTime\"),timeString:pe(l,s(\"Label.DoNotDisturb.CapitalizedAM\"),s(\"Label.DoNotDisturb.CapitalizedPM\")),selectionDisabled:o,onClick:function(){g.open()}}),h)}},{selectionDisabled:o,showLockOnToggle:c}))},Ee=function(){return Ee=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ee.apply(this,arguments)},Ne=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},we=function(e){var t=e.groupSettings,n=e.translate,o=e.updatePreferenceStatus,a=e.updateUserSettings,l=e.updateUserSettingsV2,c=(0,r.useState)(t.notificationTypePreferences),s=c[0],u=c[1],f=(0,r.useState)(t.notificationDndPreferences),p=f[0],m=f[1],b=(0,r.useState)(t.notificationChannelAggregateSettings),v=b[0],h=b[1],g=Z().initGroupExperiencePreferencesList,E=le().initGroupShoutPreferencesList,N=(0,r.useState)(B.default),w=N[0],S=N[1],x=(0,r.useState)(!1),C=x[0],D=x[1];(0,r.useEffect)((function(){t.notificationsEnabledExperiences?S(B.experience):t.notificationsEnabledGroups&&S(B.groupShout)}),[]),(0,r.useEffect)((function(){w===B.experience?g(t):w===B.groupShout&&E(t)}),[w]),(0,r.useEffect)((function(){t.notificationTypePreferences!==s&&u(t.notificationTypePreferences),t.notificationDndPreferences!==p&&m(t.notificationDndPreferences);var e=t.notificationChannelAggregateSettings,n=null==v?void 0:v.isChannelAggregateSettingEnabled,r=null==e?void 0:e.isChannelAggregateSettingEnabled;e!==v&&(r===n&&null!==e&&null!==v||h(e))}),[t,s,p,v]);var k=function(e,t,n){if(s){var r=s.find((function(t){return t.notificationTypeName===e})),i=null==r?void 0:r.notificationChannelPreferences.find((function(e){return e.notificationChannel===t}));i&&(i.preferenceStatus=n,u(Ne([],s)))}},A=function(e,t,n){p&&(void 0!==e&&(p.isNotificationDndSettingEnabled=e),void 0!==t&&(p.notificationDndStartTimeMinutes=t),void 0!==n&&(p.notificationDndEndTimeMinutes=n),m(Ee({},p)))},G=function(e,t,n,r){switch(e){case U.doNotDisturb:A(n===z.Enabled);break;case U.doNotDisturbTimeWindow:A(void 0,n.startTimeMinutes,n.endTimeMinutes)}t?l(null,t,n,r):a(e,null,n,r)},I=function(){var e;return i().createElement(i().Fragment,null,i().createElement(\"div\",{className:\"notification-descriptor small text text-content\"},t.parentalControlsEnabled?t.parentalControlsMessage:t.localizedGroupDescription),i().createElement(\"div\",{className:\"notification-aggregate-settings\"},null!=v&&i().createElement(H,{userSettingName:v.userSettingsName,localizedDescription:v.localizedChannelAggregateSettingDescription,localizedTypeName:v.localizedChannelAggregateSettingName,onTogglePreference:function(e,t,n){h(Ee(Ee({},v),{isChannelAggregateSettingEnabled:e}));var r=e?z.Enabled:z.Disabled;n&&l(null,n,r)},selectionDisabled:t.parentalControlsEnabled,selection:v.isChannelAggregateSettingEnabled})),null!=p&&i().createElement(ye,{localizedHeading:p.notificationDndTitleName,localizedDescription:p.notificationDndDescription,selection:p.isNotificationDndSettingEnabled,selectionDisabled:t.parentalControlsEnabled||p.isDndParentalControlEnabled,startTimeMinutes:p.notificationDndStartTimeMinutes,endTimeMinutes:p.notificationDndEndTimeMinutes,dndEnabledByParentalControls:p.isDndParentalControlEnabled,translate:n,updateUserSettings:G,userSettingName:null!==(e=p.userSettingsName)&&void 0!==e?e:null}),null==s?void 0:s.map((function(e,n){var r=t.parentalControlsEnabled||null!=v&&!v.isChannelAggregateSettingEnabled,a=!r&&(e.notificationChannelPreferences[0].preferenceStatus===P.All||e.notificationChannelPreferences[0].preferenceStatus===P.Best),l=e.notificationChannelPreferences[0].notificationChannel;return l&&l!==T.Invalid?i().createElement(H,{userSetting:V.NotificationTypeToUserSetting[e.notificationTypeName],userSettingName:e.userSettingsName,localizedDescription:e.localizedNotificationTypeDescriptor,localizedTypeName:e.localizedNotificationTypeName,key:e.notificationTypeName,onTogglePreference:function(t,n,r){var i,a,l,c,s,u=e.notificationChannelPreferences[0],f=t?P.All:P.None,p=e.enableUserSettingsUpdateEndpointCutover||e.enableUserSettingsDualWrite||(null==u?void 0:u.enableUserSettingsDualWrite)||(null==u?void 0:u.enableUserSettingsUpdateEndpointCutover),m=!e.enableUserSettingsUpdateEndpointCutover&&!(null==u?void 0:u.enableUserSettingsUpdateEndpointCutover);if(p){k(e.notificationTypeName,null==u?void 0:u.notificationChannel,f);var b=t?z.Enabled:z.Disabled;if(r)if(n)G(null,r,b,null!==(i=e.auditDataHeader)&&void 0!==i?i:\"\");else{var v={channelSettings:[{channelName:null===(a=e.notificationChannelPreferences[0])||void 0===a?void 0:a.notificationChannel,setting:b}]};G(null,r,v,null!==(l=e.auditDataHeader)&&void 0!==l?l:\"\")}else n&&G(n,null,b,null!==(c=e.auditDataHeader)&&void 0!==c?c:\"\")}m&&function(e,t,n){var r;switch(k(e,t,n),n){case P.All:r=d.sendAll;break;case P.None:r=d.sendNone}r&&y(r,e),o(e,t,n)}(e.notificationTypeName,null===(s=e.notificationChannelPreferences[0])||void 0===s?void 0:s.notificationChannel,f)},hasBorder:0===n&&(null!=p||null!=v),selectionDisabled:r,selection:a}):null})))};return i().createElement(\"div\",{className:C?\"group-wrapper group-open\":\"group-wrapper\"},i().createElement(\"button\",{type:\"button\",className:\"toggle-button \"+(C?\"\":\"toggle-button-closed\"),\"aria-label\":\"toggle-section\",onClick:function(){y(d.categoryToggle,t.groupName),D((function(e){return!e}))}},t.groupIcon&&i().createElement(\"div\",{className:\"flex shrink-0\"},i().createElement(M,{size:\"Large\",name:\"\"+V.GroupToIconMap[t.groupIcon]})),i().createElement(\"span\",{className:\"group-name heading text-emphasis\"},t.localizedGroupName),t.parentalControlsEnabled&&i().createElement(L,null),i().createElement(\"span\",{className:C?\"icon-up\":\"icon-down\"})),C&&i().createElement(\"div\",{className:\"selector-list\"},w===B.experience?i().createElement(ne,{translate:n,localizedDescription:t.parentalControlsEnabled?t.parentalControlsMessage:t.localizedGroupDescription,parentalControlsEnabled:t.parentalControlsEnabled}):w===B.groupShout?i().createElement(fe,{translate:n,localizedDescription:t.parentalControlsEnabled?t.parentalControlsMessage:t.localizedGroupDescription,parentalControlsEnabled:t.parentalControlsEnabled}):I()))},Se=function(t){var n,o=t.translate,a=t.displayGeneralErrorMessage,s=(0,r.useState)(!0),u=s[0],f=s[1];(0,r.useEffect)((function(){b(void 0,void 0,Promise,(function(){return v(this,(function(e){switch(e.label){case 0:return[4,c.httpService.get(p.pushEnabledUrl)];case 1:return[2,!!e.sent().data.destination]}}))})).then((function(e){f(e),e||y(d.enableNotificationsPromptShown)})).catch(a)}),[]);var m=(0,e.DeviceMeta)();if(u||!m.isAndroidDevice&&!m.isIosDevice)return null;return i().createElement(\"div\",{className:\"enable-push-notifications-prompt\"},i().createElement(\"p\",{className:\"text-emphasis\"},o(\"Label.NotificationsDisabled\",{platform:o(m.isAndroidDevice?\"Label.Android\":\"Label.IOS\")})),i().createElement(\"p\",{className:\"small text-emphasis text-format\"},o(\"Label.NotificationDisabledWarning\")),(null===(n=null===e.Hybrid||void 0===e.Hybrid?void 0:e.Hybrid.Push)||void 0===n?void 0:n.pushPermissionTrigger)&&i().createElement(l.Button,{variant:l.Button.variants.growth,className:\"access-settings-button\",onClick:function(){var t;(null===(t=null===e.Hybrid||void 0===e.Hybrid?void 0:e.Hybrid.Push)||void 0===t?void 0:t.pushPermissionTrigger)&&(y(d.enableNotificationsPromptClicked),e.Hybrid.Push.pushPermissionTrigger(\"enableAuthorizationForUser\"),f(!0))}},o(\"Action.EnableNotifications\")))},xe=function(){return xe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},xe.apply(this,arguments)},Pe=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function l(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}c((r=r.apply(e,t||[])).next())}))},Te=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},\"function\"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError(\"Generator is already executing.\");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},Ce=function(e,t){return Pe(void 0,void 0,Promise,(function(){var n;return Te(this,(function(r){switch(r.label){case 0:return n=xe(xe({},p.updateUserSetting),{headers:t}),[4,c.httpService.post(n,e)];case 1:return[2,r.sent().status]}}))}))},De=function(e,t){return Pe(void 0,void 0,Promise,(function(){var n;return Te(this,(function(r){switch(r.label){case 0:return n=xe(xe({},p.updateUserSettingV2),{headers:t}),[4,c.httpService.post(n,e)];case 1:return[2,r.sent().status]}}))}))},ke=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function l(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}c((r=r.apply(e,t||[])).next())}))},Me=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},\"function\"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError(\"Generator is already executing.\");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},Ue=(0,l.createSystemFeedback)(),Ae=Ue[0],ze=Ue[1],Ge=(0,a.withTranslations)((function(t){var n=t.translate,o=(0,r.useState)([]),a=o[0],l=o[1],s=(0,r.useState)({groupName:\"\",localizedGroupName:\"\"}),u=s[0],f=s[1],m=(0,r.useState)({groupName:\"\",localizedGroupName:\"\"}),h=m[0],g=m[1],E=(0,r.useState)(!1),N=E[0],w=E[1],S=(0,r.useCallback)((function(){ze.warning(n(\"Message.ErrorGeneral\"))}),[n]),x=(0,r.useCallback)((function(){return ke(void 0,void 0,void 0,(function(){var e;return Me(this,(function(t){switch(t.label){case 0:return[4,b(void 0,void 0,Promise,(function(){var e;return v(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,c.httpService.get(p.groupedNotificationPreferences)];case 1:return 200!==(e=t.sent()).status?[2,null]:[2,e.data];case 2:return t.sent(),[2,null];case 3:return[2]}}))}))];case 1:return(e=t.sent())?(y(d.pageLoaded),l(e.notificationPreferences)):S(),[2]}}))}))}),[S]),P=(0,r.useCallback)((function(e){return!!e&&a.some((function(t){var n;return(null===(n=t.notificationChannelAggregateSettings)||void 0===n?void 0:n.userSettingsName)===e}))}),[a]),T=function(e,t,n){return ke(void 0,void 0,Promise,(function(){return Me(this,(function(r){switch(r.label){case 0:return[4,(i={updatedPreferences:[{notificationType:e,notificationChannel:t,preferenceStatus:n}]},b(void 0,void 0,Promise,(function(){return v(this,(function(e){switch(e.label){case 0:return[4,c.httpService.post(p.notificationPreferencesUrl,i)];case 1:return[2,e.sent().status]}}))})))];case 1:return 200!==r.sent()&&S(),[2]}var i}))}))},C=function(e,t,n,r){return ke(void 0,void 0,void 0,(function(){var t,i,o;return Me(this,(function(a){switch(a.label){case 0:return e?((o={})[e]=n,t=o,i={},r&&(i[\"rbx-audit-data\"]=r),[4,Ce(t,i)]):[3,2];case 1:200!==a.sent()&&S(),a.label=2;case 2:return[2]}}))}))},D=function(e,t,n,r){return ke(void 0,void 0,void 0,(function(){var e,i,o;return Me(this,(function(a){switch(a.label){case 0:return t?((o={})[t]=n,e=o,i={},r&&(i[\"rbx-audit-data\"]=r),[4,De(e,i)]):[3,4];case 1:return 200===a.sent()?[3,2]:(S(),[3,4]);case 2:return P(t)?[4,x()]:[3,4];case 3:a.sent(),a.label=4;case 4:return[2]}}))}))};return(0,r.useEffect)((function(){x(),function(){ke(this,void 0,void 0,(function(){var e;return Me(this,(function(t){switch(t.label){case 0:return[4,b(void 0,void 0,Promise,(function(){var e;return v(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,c.httpService.get(p.experiencePreferencesUrl)];case 1:return 200!==(e=t.sent()).status?[2,null]:[2,e.data];case 2:return t.sent(),[2,null];case 3:return[2]}}))}))];case 1:return(e=t.sent())?f(e.experiencePreferences):S(),[2]}}))}))}(),function(){ke(this,void 0,void 0,(function(){var e;return Me(this,(function(t){switch(t.label){case 0:return[4,b(void 0,void 0,Promise,(function(){var e;return v(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,c.httpService.get(p.groupShoutPreferencesUrl)];case 1:return 200!==(e=t.sent()).status?[2,null]:[2,e.data];case 2:return t.sent(),[2,null];case 3:return[2]}}))}))];case 1:return(e=t.sent())?g(e.groupShoutPreferences):S(),[2]}}))}))}(),function(){ke(this,void 0,void 0,(function(){var t;return Me(this,(function(n){switch(n.label){case 0:return[4,b(void 0,void 0,Promise,(function(){return v(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,e.Guac.callBehaviour(\"account-settings-ui\")];case 1:return[2,!!t.sent().displayPushNotificationUpsell];case 2:return t.sent(),[2,!1];case 3:return[2]}}))}))];case 1:return t=n.sent(),w(t),[2]}}))}))}()}),[S,x]),i().createElement(\"div\",null,i().createElement(Ae,null),i().createElement(\"div\",{className:\"title-wrapper\"},i().createElement(\"h2\",null,n(\"Heading.Notifications\")),i().createElement(\"p\",null,n(\"Description.CustomizeNotificationsChannels\")),N&&i().createElement(Se,{translate:n,displayGeneralErrorMessage:S})),a.map((function(e,t){return[0!==t&&!e.restrictedAccess&&i().createElement(\"div\",{className:\"group-divider\"}),!e.restrictedAccess&&i().createElement(we,{key:e.localizedGroupName,groupSettings:e,translate:n,updatePreferenceStatus:T,updateUserSettings:C,updateUserSettingsV2:D})]})),!u.restrictedAccess&&i().createElement($,null,a.length>0&&i().createElement(\"div\",{className:\"group-divider\"}),i().createElement(we,{key:u.localizedGroupName,groupSettings:u,translate:n,updatePreferenceStatus:T,updateUserSettings:C,updateUserSettingsV2:D})),!h.restrictedAccess&&i().createElement(ce,null,i().createElement(\"div\",{className:\"group-divider\"}),i().createElement(we,{key:h.localizedGroupName,groupSettings:h,translate:n,updatePreferenceStatus:T,updateUserSettings:C,updateUserSettingsV2:D})))}),w),Ie=function(e){(0,o.render)(i().createElement(Ge,null),e)};Object.assign(t(),{NotificationPreferencesService:{renderNotificationPreferences:Ie}})}()}();\n//# sourceMappingURL=https://sourcemaps.rbxcdn.com/de90e64fa69f7f32c73b8b1df995d9b6-notificationPreferences.bundle.min.js.map\n\n/* Bundle detector */\nwindow.Roblox && window.Roblox.BundleDetector && window.Roblox.BundleDetector.bundleDetected(\"NotificationPreferences\");"
  }
}