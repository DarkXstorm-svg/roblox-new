{
  "metadata": {
    "timestamps": {
      "start": "2026-02-18T19:59:00.026573",
      "end": "2026-02-18T19:59:00.163623",
      "duration_ms": 137
    },
    "url": {
      "full": "https://js.rbxcdn.com/f26fd21b1c0226a9a0873d82fd50ba10830e69471256583d737548fe1ad717fe-Friends.js",
      "protocol": "https",
      "domain": "js.rbxcdn.com",
      "path": "/f26fd21b1c0226a9a0873d82fd50ba10830e69471256583d737548fe1ad717fe-Friends.js",
      "normalized_path": "/f26fd21b1c0226a9a0873d82fd50ba10830e69471256583d737548fe1ad717fe-Friends.js",
      "query": {}
    },
    "method": "GET",
    "status_code": 200,
    "size": {
      "request_bytes": 0,
      "response_bytes": 15757,
      "compressed": false
    },
    "content_type": "application/javascript",
    "cache_status": "public, max-age=31536000"
  },
  "request": {
    "headers": {
      "sec-ch-ua-platform": "\"Linux\"",
      "user-agent": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36",
      "sec-ch-ua": "\"Not(A:Brand\";v=\"8\", \"Chromium\";v=\"144\", \"Google Chrome\";v=\"144\"",
      "sec-ch-ua-mobile": "?0",
      "accept": "*/*",
      "sec-fetch-site": "cross-site",
      "sec-fetch-mode": "no-cors",
      "sec-fetch-dest": "script",
      "sec-fetch-storage-access": "none",
      "referer": "https://www.roblox.com/",
      "accept-encoding": "gzip, deflate, br, zstd",
      "accept-language": "en-US,en;q=0.9,fil;q=0.8",
      "priority": "u=2"
    },
    "payload": null
  },
  "response": {
    "headers": {
      "content-type": "application/javascript",
      "date": "Thu, 04 Dec 2025 18:11:28 GMT",
      "last-modified": "Tue, 02 Dec 2025 06:22:18 GMT",
      "content-encoding": "br",
      "x-amz-server-side-encryption": "AES256",
      "cache-control": "public, max-age=31536000",
      "x-amz-version-id": "q597roCZD0_d01hHV.ZSgD1eNvMndU9M",
      "server": "AmazonS3",
      "etag": "W/\"b16c7ca4bbdc169d7abde7f35880e083\"",
      "vary": "accept-encoding, Origin",
      "x-cache": "Hit from cloudfront",
      "via": "1.1 1b7c94274bd830ddf26396883b21ed8a.cloudfront.net (CloudFront)",
      "x-amz-cf-pop": "MNL51-P1",
      "x-amz-cf-id": "hCamG_IShzICUrvf1xkKFKSqJbKEwmR9oznDO8bszhx7bzaLDKBW6w==",
      "age": "6544053",
      "rbx-cdn-provider": "aws",
      "timing-allow-origin": "*",
      "nel": "{\"report_to\":\"network-errors\",\"max_age\":604800,\"success_fraction\":0,\"failure_fraction\":0.05,\"response_headers\":[\"Rbx-Cdn-Provider\",\"vary\"]}",
      "report-to": "{\"group\":\"network-errors\",\"max_age\":604800,\"endpoints\":[{\"url\":\"https://ncs.roblox.com/upload\"}]}",
      "server-timing": "cdn-cache-hit,cdn-pop;desc=\"MNL51-P1\",cdn-rid;desc=\"hCamG_IShzICUrvf1xkKFKSqJbKEwmR9oznDO8bszhx7bzaLDKBW6w==\",cdn-hit-layer;desc=\"EDGE\",cdn-downstream-fbl;dur=1"
    },
    "body": "/*! For license information please see friends.bundle.min.js.LICENSE.txt */\n!function(){var e={452:function(e,t){var r;!function(){\"use strict\";var n={}.hasOwnProperty;function a(){for(var e=\"\",t=0;t<arguments.length;t++){var r=arguments[t];r&&(e=o(e,i(r)))}return e}function i(e){if(\"string\"==typeof e||\"number\"==typeof e)return e;if(\"object\"!=typeof e)return\"\";if(Array.isArray(e))return a.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes(\"[native code]\"))return e.toString();var t=\"\";for(var r in e)n.call(e,r)&&e[r]&&(t=o(t,r));return t}function o(e,t){return t?e?e+\" \"+t:e+t:e}e.exports?(a.default=a,e.exports=a):void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r)}()}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){\"use strict\";var e=React,t=r.n(e),n=ReactDOM,a=CoreUtilities,i=Redux,o=ReduxThunk,u=r.n(o),s=ReactRedux,c=\"SET_FRIENDS\",l=\"LOAD_MORE_FRIENDS\",d=\"SET_METADATA\",f=\"SET_TABLOADER\",m=\"SET_ERROR_TYPE\",p=[],v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c:return t.friends;case l:return e.concat(t.friends);default:return e}},h=Roblox;function y(){var e=/\\/users\\/(\\d+)\\//g.exec(window.location.pathname);return e?e[1]:null}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=y()||h.CurrentUser.userId,R={profileUserId:g,isMyProfile:g===h.CurrentUser.userId,isNearbyUpsellEnabled:!1,isFriendsUserDataStoreCacheEnabled:!0,onlyShowContents:!1,userName:\"\",displayName:\"\"},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0,r=window.location.search.match(\"onlyShowContents\")||!1;return t.type===d?b(b(b({},{onlyShowContents:r}),e),t.data):e},T={isLoading:!1},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;return t.type===f?t.data:e},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return t.type===m?t.errorType:e},w=(0,i.combineReducers)({friends:v,metadata:F,tabLoader:I,errorType:C}),N=PropTypes,A=r.n(N),O=ReactStyleGuide,D=ReactUtilities,P=r(452),L=r.n(P),q=CoreRobloxUtilities,U=function(e){return{type:d,data:e}},x={FRIENDS_EMPTY:\"Label.NoResults\",CONNECTIONS_FILTER:{PLACEHOLDER:\"Label.FilterConnections\"},FRIENDTABS:{FRIENDS:\"friends\",FOLLOWING:\"following\",FOLLOWERS:\"followers\",FRIENDREQUESTS:\"friend-requests\"},FILTER_STATUS_OPTIONS:{0:\"Label.Offline\",1:\"Label.Online\",2:\"Label.InGame\"},FILTER_STATUS_OPTIONS_DEFAULT:\"Label.All\",LIST_TYPE:{friends:q.userInfoService.TYPE.FRIENDS,following:q.userInfoService.TYPE.FOLLOWINGS,followers:q.userInfoService.TYPE.FOLLOWERS,\"friend-requests\":q.userInfoService.TYPE.FRIENDREQUESTS},START_PAGE:1,MAX_PER_PAGE:18,MAX_LIMIT:50,CACHE_CRITERIA:{useCache:!0,expirationWindowMS:3e4},FRIEND_REQUEST_COUNT_EVENT:\"Roblox.Friends.CountChanged\",MAX_FRIENDS_STATUS:409,MAX_FRIENDS_CODE:{currentUser:11,receiverUser:12},CAPTCHA_CODE:14,FLOODED_STATUS:429,FORBIDDEN_STATUS:403,FRIENDS_ERROR_TYPE:{currentUser:\"currentUser\",receiverUser:\"receiverUser\",general:\"general\",flooded:\"flooded\"},FRIENDS_ERROR:{currentUser:{titleText:\"Label.ErrorTitle\",bodyText:\"Message.ForMaxFriendsError\",neutralButtonText:\"Label.Ok\",footerText:\"Message.ForMaxFriendsFooter\"},receiverUser:{titleText:\"Label.ErrorTitle\",bodyText:\"Message.ForMaxRequestsError\",neutralButtonText:\"Label.Ok\",footerText:\"Message.ForMaxRequestsFooter\"},general:{titleText:\"Label.ErrorTitle\",bodyText:\"Message.ForGeneralError\",neutralButtonText:\"Label.Ok\",footerText:\"Message.ForGeneralFooter\"},flooded:{titleText:\"Label.ErrorTitle\",bodyText:\"Message.FloodLimitExceededError\",neutralButtonText:\"Label.Ok\"}},SORT_ORDER:{asc:\"Asc\",desc:\"Desc\"},SORT_OPTIONS:{ALPHABETICAL:\"Alphabetical\",API:\"Api\",STATUS:\"Status\"},EVENTS:{ACCEPTED_FRIEND_REQUEST:\"AcceptedFriendRequest\",FRIEND_REQUESTS_DISPLAYED:\"FriendRequestsDisplayed\",TOTAL_FRIEND_REQUESTS_RETRIEVED:\"TotalFriendRequestsRetrieved\",FRIENDS_LANDING_PAGE_LOAD:\"friendsLandingPageLoad\"},FRIENDS_REQUEST_LIST_CONTEXT:\"FriendsRequestListContext\",PLUS_SIGN:\"+\",MUTUAL_FRIENDS_SHOW_COUNT:5,DEVICE_TYPES:{computer:\"computer\"},FRIENDS_RENAMED_TO_CONNECTIONS_CACHE_KEY:\"isFriendsRenamedToConnections\",UNAVAILABLE_FRIEND_NAME:\"Label.UnavailableFriendName\",TRUSTED_FRIEND_STATUS:{Friends:\"Friends\",NotFriends:\"NotFriends\",RequestSent:\"RequestSent\",RequestReceived:\"RequestReceived\",Invalid:\"Invalid\",TrustedFriends:\"TrustedFriends\",RequestIgnored:\"RequestIgnored\"}};function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(\"undefined\"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if(\"string\"==typeof e)return M(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);\"Object\"===r&&e.constructor&&(r=e.constructor.name);if(\"Map\"===r||\"Set\"===r)return Array.from(e);if(\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M(e,t)}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var k=x.MAX_FRIENDS_STATUS,j=x.FRIENDS_ERROR_TYPE,B=x.MAX_FRIENDS_CODE,G=x.FLOODED_STATUS,Q=function(e){return{type:m,errorType:e}},W=function(e){return function(t){if(e){var r=_(e.data.errors,1)[0];switch(e.status){case k:r.code===B.currentUser&&t(Q(j.currentUser)),r.code===B.receiverUser&&t(Q(j.receiverUser));break;case G:t(Q(j.flooded));break;default:t(Q(j.general))}}}},H=h.EnvironmentUrls.apiGatewayUrl,V=h.EnvironmentUrls.friendsApi,Y=h.EnvironmentUrls.thumbnailsApi,J=(h.EnvironmentUrls.presenceApi,h.EnvironmentUrls.gamesApi),z=(h.EnvironmentUrls.usersApi,function(e){return\"/users/\".concat(e,\"/profile\")}),X=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{retryable:!0,withCredentials:!0,url:\"\".concat(H,\"/access-management/v1/upsell-feature-access?featureName=\").concat(e).concat(t?\"&extraParameters=\".concat(t):\"\").concat(r?\"&successfulActions=\".concat(r):\"\")}},$=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return{retryable:!0,withCredentials:!0,url:\"\".concat(H,\"/access-management/v1/upsell-feature-access?featureName=\").concat(e).concat(t?\"&extraParameters=\".concat(t):\"\").concat(r?\"&successfulActions=\".concat(r):\"\").concat(n?\"&namespace=\".concat(encodeURIComponent(n)):\"\")}},K=x.FRIENDTABS,Z=function(){return\"\".concat(V,\"/v1/metadata\")},ee=function(e){return{retryable:!1,withCredentials:!0,url:\"\".concat(V,\"/v1/users/\").concat(e,\"/decline-friend-request\")}},te=function(e){return{retryable:!1,withCredentials:!0,url:\"\".concat(V,\"/v1/users/\").concat(e,\"/accept-friend-request\")}},re=function(){return{retryable:!1,withCredentials:!0,url:\"\".concat(V,\"/v1/user/friend-requests/decline-all\")}},ne=function(e){return{retryable:!1,withCredentials:!0,url:\"\".concat(V,\"/v1/users/\").concat(e,\"/follow\")}},ae=function(e){return{retryable:!1,withCredentials:!0,url:\"\".concat(V,\"/v1/users/\").concat(e,\"/unfollow\")}},ie=function(e){return{retryable:!1,withCredentials:!0,url:\"\".concat(V,\"/v1/users/\").concat(e,\"/unfriend\")}},oe=function(){return\"\".concat(Y,\"/v1/users/avatar-headshot?size=150x150&format=png\")},ue=function(){return{retryable:!0,withCredentials:!0,url:\"\".concat(J,\"/v1/games/multiget-playability-status\")}},se=function(){return\"\".concat(V,\"/v1/user/friend-requests/count\")},ce=function(e){return\"\".concat(V,\"/v1/users/\").concat(e,\"/followers/count\")},le=function(e){return\"\".concat(V,\"/v1/users/\").concat(e,\"/followings/count\")},de=function(){return\"\".concat(J,\"/v1/games\")},fe=function(e,t,r,n){var a=r?\"1\":\"\",i=n?36:18;return{retryable:!1,withCredentials:!0,url:\"\".concat(V,\"/v1/users/\").concat(e,\"/friends/find?limit=\").concat(i,\"&cursor=\").concat(t,\"&userSort=\").concat(a)}},me=function(e,t,r,n){var a=n?36:18;return{retryable:!1,withCredentials:!0,url:\"\".concat(V,\"/v1/users/\").concat(e,\"/friends/search?limit=\").concat(a,\"&cursor=\").concat(t,\"&query=\").concat(r)}},pe=function(e){return{retryable:!1,withCredentials:!0,url:\"\".concat(V,\"/v1/users/\").concat(e,\"/friends/count\")}},ve=function(){return{retryable:!1,withCredentials:!0,url:\"\".concat(V,\"/v1/my/new-friend-requests\")}},he=function(e){return{retryable:!0,withCredentials:!0,url:\"\".concat(V,\"/v1/my/trusted-friends/\").concat(e,\"/status\")}},ye={userId:0,getFriendsTypeName:function(e){switch(e){case K.FRIENDREQUESTS:return\"FriendRequests\";case K.FOLLOWING:return\"Following\";case K.FOLLOWERS:return\"Followers\";case K.FRIENDS:default:return\"AllFriends\"}},setUserId:function(e){this.userId=y()||e},getMetadata:function(e){var t={url:Z(),retryable:!0,withCredentials:!0},r={targetUserId:e};return a.httpService.get(t,r)},acceptFriendRequest:function(e){var t=te(e);return a.httpService.post(t)},declineFriendRequest:function(e){var t=ee(e);return a.httpService.post(t,{})},declineAllFriendRequests:function(){var e=re();return a.httpService.post(e,{})},follow:function(e,t){var r=ne(e);return a.httpService.post(r,t,!0)},unfollow:function(e){var t=ae(e),r={targetUserId:e};return a.httpService.post(t,r)},unfriend:function(e){var t=ie(e);return a.httpService.post(t,{})},getAvatarHeadshots:function(e){var t={url:oe(),retryable:!0,withCredentials:!0};return a.httpService.buildBatchPromises(e,50,t).then((function(e){return e&&e.length>0?e.reduce((function(e,t){var r=t.data.data;return e.concat(r)}),[]):[]})).catch((function(){return[]}))},getGamePlayabilities:function(e){var t=ue();return a.httpService.get(t,{universeIds:e})},getFriendsRequestCount:function(){var e={url:se(),retryable:!0,withCredentials:!0};return a.httpService.get(e)},getFollowersCount:function(e){var t={url:ce(e),retryable:!0,withCredentials:!0};return a.httpService.get(t)},getFollowingsCount:function(e){var t={url:le(e),retryable:!0,withCredentials:!0};return a.httpService.get(t)},getGames:function(e){var t={url:de(),retryable:!0,withCredentials:!1},r={universeIds:e};return a.httpService.get(t,r)},getPaginatedFriends:function(e,t,r,n){var i=fe(e,t,r,n);return a.httpService.get(i)},getSearchedFriends:function(e,t,r,n){var i=me(e,t,r,n);return a.httpService.get(i)},getFriendsCount:function(e){var t=pe(e);return a.httpService.get(t)},clearNewFriendRequests:function(){var e=ve();return a.httpService.delete(e,{})},getTrustedConnectionStatus:function(e){return a.httpService.get(he(e))}};var Ee=x.LIST_TYPE,be=x.CACHE_CRITERIA,Se=x.FRIEND_REQUEST_COUNT_EVENT,ge=(0,s.connect)((function(e){return{friends:e.friends,metadata:e.metadata,tabLoader:e.tabLoader,errorType:e.errorType}}),(function(e){return{setMetadata:function(t){e(U(t))},setFriends:function(){e(function(e){return{type:c,friends:e}}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]))},loadMoreFriends:function(){e(function(e){return{type:l,friends:e}}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]))},enableTabLoader:function(){e({type:f,data:{isLoading:!0}})},disableTabLoader:function(){e({type:f,data:{isLoading:!1}})},clearError:function(){e(Q(null))},followFriend:function(t,r){return ye.follow(t,r).catch((function(t){if(function(e){var t,r,n;return!((null==e?void 0:e.status)!==x.FORBIDDEN_STATUS||null==e||null===(t=e.data)||void 0===t||null===(r=t.errors)||void 0===r||!r.length||(null===(n=e.data.errors[0])||void 0===n?void 0:n.code)!==x.CAPTCHA_CODE)}(t)&&!r)throw new Error(function(e){var t,r;return null==e||null===(t=e.data)||void 0===t||null===(r=t.errors[0])||void 0===r?void 0:r.fieldData}(t));e(W(t))}))},unfollowFriend:function(t){return ye.unfollow(t).catch((function(t){return e(W(t))}))},acceptFriendRequest:function(t){return function(r){return ye.acceptFriendRequest(r.id).then((function(){return t(r.id)})).then((function(){q.userInfoService.refreshCacheData(Ee[\"friend-requests\"],be)})).catch((function(t){return e(W(t))}))}},declineFriendRequest:function(t){return function(r){return ye.declineFriendRequest(r.id).then((function(){return t(r.id)})).then((function(){q.userInfoService.refreshCacheData(Ee[\"friend-requests\"],be).then((function(){document.dispatchEvent(new CustomEvent(Se))}))})).catch((function(t){return e(W(t))}))}},declineAllFriendRequests:function(){return ye.declineAllFriendRequests().then((function(e){var t;return q.userInfoService.refreshCacheData(Ee[\"friend-requests\"],be).then((function(){document.dispatchEvent(new CustomEvent(Se))})),null===(t=e.data)||void 0===t?void 0:t.backgrounded})).catch((function(t){return e(W(t))}))},unfriend:function(t){return ye.unfriend(t).catch((function(t){return e(W(t))}))},getGamePlayabilities:ye.getGamePlayabilities}})),Re={common:[\"Common.Presence\",\"CommonUI.Features\"],feature:\"Feature.Friends\"},Fe=HeaderScripts,Te=RobloxUserProfiles;function Ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(\"undefined\"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if(\"string\"==typeof e)return Ce(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);\"Object\"===r&&e.constructor&&(r=e.constructor.name);if(\"Map\"===r||\"Set\"===r)return Array.from(e);if(\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ce(e,t)}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function Ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var we=(0,e.createContext)(),Ne=function(r){var n=r.children,a=Ie((0,e.useState)(0),2),i=a[0],o=a[1],u=Ie((0,e.useState)(null),2),s=u[0],c=u[1],l=Ie((0,e.useState)(null),2),d=l[0],f=l[1],m=Ie((0,e.useState)(null),2),p=m[0],v=m[1],h=Ie((0,e.useState)([]),2),y=h[0],E=h[1],b=Ie((0,e.useState)(null),2),S=b[0],g=b[1],R=Ie((0,e.useState)(!1),2),F=R[0],T=R[1],I=Ie((0,e.useState)({}),2),C=I[0],w=I[1],N=Ie((0,e.useState)(!0),2),A={friendsCount:i,setFriendsCount:o,friendsNameFilter:s,setFriendsNameFilter:c,friendsStatusFilter:d,setFriendsStatusFilter:f,friendsSort:p,setFriendsSort:v,paginatedFriends:y,setPaginatedFriends:E,filterBarEnabled:S,setFilterBarEnabled:g,showJoinGameButtonInFriendCardDesktopOnly:F,setShowJoinGameButtonInFriendCardDesktopOnly:T,friendRequestIdToUniverseSourceMap:C,setFriendRequestIdToUniverseSourceMap:w,showFriendRecs:N[0],setShowFriendRecs:N[1]};return t().createElement(we.Provider,{value:A},n)};function Ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(\"undefined\"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if(\"string\"==typeof e)return Oe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);\"Object\"===r&&e.constructor&&(r=e.constructor.name);if(\"Map\"===r||\"Set\"===r)return Array.from(e);if(\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Oe(e,t)}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Ne.propTypes={children:A().node.isRequired};var De=x.CONNECTIONS_FILTER;function Pe(r){var n,a,i,o=r.handleSearchValueChange,u=r.translate,s=Ae((0,e.useState)(\"\"),2),c=s[0],l=s[1],d=(0,e.useCallback)((n=function(e){o((e||\"\").trim())},a=300,function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];clearTimeout(i),i=setTimeout((function(){return n.apply(void 0,t)}),a)}),[]);return t().createElement(\"div\",{className:\"friends-filter-searchbar-container form-control input-field\"},t().createElement(\"span\",{className:\"icon-search\"}),t().createElement(\"input\",{className:\"friends-filter-searchbar-input\",type:\"text\",value:c||\"\",onChange:function(e){l(e.target.value||void 0),d(e.target.value)},placeholder:u(De.PLACEHOLDER)}))}Pe.propTypes={handleSearchValueChange:A().func.isRequired,translate:A().func.isRequired};var Le=(0,D.withTranslations)(ge(Pe),Re),qe=q.eventStreamService.eventTypes,Ue={filterFriendsByName:{name:\"filterFriendsByName\",type:qe.formInteraction,context:\"friends\",requiredParams:[\"query\"]},filterFriendsByStatus:{name:\"filterFriendsByStatus\",type:qe.formInteraction,context:\"friends\",requiredParams:[\"status\"]}};function xe(r){r.translate;var n=(0,e.useContext)(we),a=(n.friendsStatusFilter,n.setFriendsNameFilter);n.setFriendsStatusFilter;return t().createElement(\"div\",{className:\"friends-filter\"},t().createElement(Le,{handleSearchValueChange:function(e){q.eventStreamService.sendEvent(Ue.filterFriendsByName,{query:e}),a(e)}}))}xe.propTypes={translate:A().func.isRequired};var _e=(0,D.withTranslations)(ge(xe),Re);function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ke,je,Be=x.FRIENDTABS,Ge=q.dataStores.userDataStore.maxFriendRequestNotificationCount,Qe=(0,O.createModal)(),We=(je=2,function(e){if(Array.isArray(e))return e}(ke=Qe)||function(e,t){if(\"undefined\"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(a)throw i}}return r}}(ke,je)||function(e,t){if(e){if(\"string\"==typeof e)return Me(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===r&&e.constructor&&(r=e.constructor.name),\"Map\"===r||\"Set\"===r?Array.from(e):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Me(e,t):void 0}}(ke,je)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()),He=We[0],Ve=We[1];function Ye(r){var n=r.translate,a=r.title,i=r.currentTab,o=r.tooltipMsg,u=r.declineAllFriendRequests,s=r.refreshFriendsList,c=(0,e.useContext)(we).friendsCount,l=i===Be.FRIENDREQUESTS&&c>0,d=\"(\".concat(c,\")\");return c>=Ge&&i!==Be.FRIENDS&&(d=\"(\".concat(Ge,\"+)\")),t().createElement(\"div\",null,t().createElement(\"div\",{className:\"container-header\"},t().createElement(\"h2\",{className:\"friends-subtitle\"},a,\" \",d),t().createElement(O.Tooltip,{id:\"friendsTooltip\",placement:\"bottom\",content:o},t().createElement(\"span\",{className:\"icon-moreinfo\"})),i===Be.FRIENDS&&t().createElement(_e,null),l&&t().createElement(O.Button,{variant:\"control\",size:\"xs\",className:\"ignore-button see-all-link\",onClick:function(){return u().then((function(e){e?Ve.open():s()}))}},n(\"Action.IgnoreAll\")),t().createElement(He,{title:n(\"Action.IgnoreAll\"),body:n(\"Label.DeclineAllBackgrounded\"),neutralButtonText:n(\"Label.Ok\")})))}Ye.propTypes={translate:A().func.isRequired,title:A().string.isRequired,currentTab:A().string.isRequired,tooltipMsg:A().string.isRequired,declineAllFriendRequests:A().func.isRequired,refreshFriendsList:A().func.isRequired};var Je=(0,D.withTranslations)(ge(Ye),Re),ze=RobloxThumbnails,Xe=RobloxPresence,$e=r.n(Xe),Ke=function(e){var r=e.children;return t().createElement(\"div\",{className:\"avatar-card-footer avatar-card-label\"},r)};Ke.propTypes={children:A().node.isRequired};var Ze=Ke;function et(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(\"undefined\"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if(\"string\"==typeof e)return tt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);\"Object\"===r&&e.constructor&&(r=e.constructor.name);if(\"Map\"===r||\"Set\"===r)return Array.from(e);if(\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tt(e,t)}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var rt=x.FRIENDTABS,nt=x.EVENTS,at=x.FRIENDS_REQUEST_LIST_CONTEXT,it=x.PLUS_SIGN,ot=x.MUTUAL_FRIENDS_SHOW_COUNT,ut=x.UNAVAILABLE_FRIEND_NAME,st=q.dataStores.userDataStore,ct=function(r){var n,i=r.id,o=r.name,u=r.displayName,s=r.verifiedBadgeData,c=r.isDeleted,l=r.friendRequestSentFromInGame,d=r.friendRequestSentFromQrCode,f=r.friendRequestSentAt,m=r.sourceUniverse,p=r.mutualFriends,v=r.position,y=r.currentTab,E=r.isMyProfile,b=r.translate,S=r.unfollowFriend,g=r.unfriend,R=r.followFriend,F=r.acceptFriendRequestThenRemoveCard,T=r.declineFriendRequestThenRemoveCard,I=r.refreshFriendsList,C=r.presence,w=r.canAccessTCIndicatorStatus,N=et((0,e.useState)(!0),2),A=N[0],D=N[1],P=et((0,e.useState)(!1),2),L=P[0],U=P[1],_=et((0,e.useState)(!1),2),M=_[0],k=_[1],j=et((0,e.useState)(\"\"),2),B=j[0],G=j[1],Q=et((0,e.useState)(\"\"),2),W=Q[0],H=Q[1],V=et((0,e.useState)(!1),2),Y=V[0],J=V[1],X=function(e){return a.urlService.getUrlWithQueries(q.entityUrl.game.getReferralPath(),{PlaceId:e,PageType:\"Friends\",Position:v})},$=y===rt.FOLLOWING&&E&&!Y,K=y===rt.FRIENDREQUESTS&&E,Z=y===rt.FRIENDS&&c&&E,ee=z(i),te=(null==m?void 0:m.name)&&(null==m?void 0:m.rootPlaceId),re=p.length>0,ne=t().createElement(Xe.PresenceStatusLabel,{userId:i,translate:b,linkUrlGetter:X,linkClassNames:[\"avatar-status-link\",\"text-link\"]}),ae=\"\",ie=!1,oe=(0,e.useContext)(we).showJoinGameButtonInFriendCardDesktopOnly,ue=(0,Xe.usePresence)(i,C),se=et((0,e.useState)(C.isPlayable),2),ce=se[0],le=se[1];(0,e.useEffect)((function(){ue.userPresenceType===Xe.PresenceType.Game&&(ue.universeId===C.universeId?le(C.isPlayable):ye.getGamePlayabilities([ue.universeId]).then((function(e){var t,r;le(null!==(t=null==e||null===(r=e.data[0])||void 0===r?void 0:r.isPlayable)&&void 0!==t&&t)})))}),[ue]);var de=ue.placeId,fe=(ue.gameId,et((0,e.useState)(\"\"),2)),me=fe[0],pe=fe[1];(0,e.useEffect)((function(){w&&ye.getTrustedConnectionStatus(i).then((function(e){e.data.status===x.TRUSTED_FRIEND_STATUS.TrustedFriends&&pe(\"trusted-connection-avatar-headshot\")}))}),[w,i]);var ve,he,Ee,be,Se;if(y===rt.FRIENDS||y===rt.FOLLOWING){if(ue.userPresenceType===Xe.PresenceType.Game){var ge=(Se=X(de),ce&&oe?{lastLocationLink:Se,truncateFirstLine:!0,footer:t().createElement(O.Button,{onClick:function(){return e=i,void h.GameLauncher.followPlayerIntoGame(e);var e},size:\"sm\",width:\"full\",variant:\"growth\"},b(\"Action.JoinGame\"))}:{lastLocationLink:Se,truncateFirstLine:!1,footer:null});ie=ge.truncateFirstLine,n=ge.footer}y!==rt.FOLLOWING||A||(ae=b(\"Label.Unfollowed\"))}else if(y===rt.FRIENDREQUESTS){ne=\"\";re?(be=function(e){var r=e.slice(0,ot).map((function(e){return t().createElement(\"li\",{className:\"text-overflow\"},e)}));if(e.length>ot){var n=e.length-ot,a=b(\"Message.More\",{plusSign:it,remainingCount:n});r.push(t().createElement(\"li\",{className:\"text-overflow\"},a))}return r}(Ee=p),n=t().createElement(O.Tooltip,{id:\"mutual-friends-tooltip\",placement:\"bottom\",content:be},t().createElement(\"span\",{className:\"mutual-friends-tooltip-label\"},b(\"Label.WebMutualConnection\",{mutualConnectionsCount:Ee.length})))):te?(ve=m.rootPlaceId,he=X(ve),n=t().createElement(e.Fragment,null,b(\"Label.SentFrom\"),\" \",t().createElement(\"a\",{href:he,className:\"text-link avatar-card-footer-link\"},m.name))):d&&(n=b(\"Label.SentFromQrCode\"))}c&&(ne=b(\"Label.Inactive\"));var Re=t().createElement(ze.Thumbnail2d,{type:ze.ThumbnailTypes.avatarHeadshot,size:ze.DefaultThumbnailSize,targetId:i,containerClass:\"avatar-card-image \".concat(me)});return(0,e.useEffect)((function(){var e={captchaActionType:\"followUser\",captchaActivated:M,captchaError:function(){k(!1)},captchaSuccess:function(e){k(!1),R(i,e).then((function(){return D(!0)}))},captchaReturnTokenInSuccessCb:!0,captchaDismissed:function(){k(!1)},endCaptcha:function(){k(!1)},inputParams:{dataExchange:B,unifiedCaptchaId:W}};h.CaptchaService.openCaptcha(e)}),[M]),t().createElement(O.AvatarCardItem.Default,{id:i,disableCard:c||L||i<0},t().createElement(O.AvatarCardItem.Content,null,t().createElement(O.AvatarCardItem.Headshot,{imageLink:c?\"\":ee,statusIcon:t().createElement(Xe.PresenceStatusIcon,{translate:b,userId:i}),thumbnail:Re}),t().createElement(O.AvatarCardItem.Caption,{name:null!=o?o:b(ut),displayName:null!=u?u:b(ut),nameLink:c?\"\":ee,labelFirstLine:ne,labelSecondLine:ae,footer:n&&t().createElement(Ze,null,n),hasMenu:$||Z,truncateFirstLine:ie,verifiedBadgeData:s}),$&&t().createElement(O.AvatarCardItem.Menu,null,A&&t().createElement(O.AvatarCardItem.MenuItem,{className:\"friend-unfollow\",title:b(\"Action.Unfollow\"),onClick:function(e){e.preventDefault(),S(i).then((function(){return D(!1)})),c&&(J(!0),st.clearUserDataStoreCache())}}),!A&&t().createElement(O.AvatarCardItem.MenuItem,{className:\"friend-follow\",title:b(\"Action.Follow\"),onClick:function(e){e.preventDefault(),R(i).then((function(){return D(!0)}),(function(e){var t=e.message;try{var r=JSON.parse(t);G(r.dxBlob),H(r.unifiedCaptchaId)}catch(e){G(t)}k(!0)}))}})),Z&&t().createElement(O.AvatarCardItem.Menu,null,t().createElement(O.AvatarCardItem.MenuItem,{className:\"friend-unfriend\",title:b(\"Label.RemoveConnection\"),onClick:function(){g(i).then(I)}}))),K&&t().createElement(O.AvatarCardItem.ButtonGroup,null,t().createElement(O.Button,{isLoading:L,className:\"ignore-friend\",onClick:function(){U(!0),T({id:i}).finally((function(){U(!1)}))},variant:\"secondary\",size:\"md\"},b(\"Action.Ignore\")),t().createElement(O.Button,{isLoading:L,className:\"accept-friend\",onClick:function(){U(!0),F({id:i}).then((function(){var e={senderUserId:i,currentUserId:h.CurrentUser.userId,sentFromInGame:l,sentFromQrCode:d,timeFriendRequestWasSent:f};h.EventStream.SendEvent(nt.ACCEPTED_FRIEND_REQUEST,at,e)})).finally((function(){U(!1)}))},variant:\"cta\",size:\"md\"},b(\"Action.Accept\"))))};ct.defaultProps={verifiedBadgeData:null,isDeleted:!1,friendRequestSentAt:null,sourceUniverse:null,mutualFriends:[],presence:{universeId:void 0}},ct.propTypes={id:A().number.isRequired,name:A().string.isRequired,displayName:A().string.isRequired,verifiedBadgeData:A().shape({hasVerifiedBadge:A().bool,titleText:A().string}),isDeleted:A().bool,friendRequestSentFromInGame:A().bool.isRequired,friendRequestSentFromQrCode:A().bool.isRequired,friendRequestSentAt:A().string,sourceUniverse:A().shape({name:A().string,rootPlaceId:A().number}),mutualFriends:A().arrayOf(A().string),position:A().number.isRequired,currentTab:A().string.isRequired,isMyProfile:A().bool.isRequired,translate:A().func.isRequired,unfollowFriend:A().func.isRequired,unfriend:A().func.isRequired,followFriend:A().func.isRequired,acceptFriendRequestThenRemoveCard:A().func.isRequired,declineFriendRequestThenRemoveCard:A().func.isRequired,refreshFriendsList:A().func.isRequired,presence:A().shape({isPlayable:A().bool.isRequired,universeId:A().number}),canAccessTCIndicatorStatus:A().bool.isRequired};var lt=(0,D.withTranslations)(ge(ct),Re);function dt(e,t,r,n,a,i,o){try{var u=e[i](o),s=u.value}catch(e){return void r(e)}u.done?t(s):Promise.resolve(s).then(n,a)}function ft(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){dt(i,n,a,o,u,\"next\",e)}function u(e){dt(i,n,a,o,u,\"throw\",e)}o(void 0)}))}}var mt=function(){var e=ft(regeneratorRuntime.mark((function e(t,r,n){var i,o,u,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r?btoa(JSON.stringify(r)):null,o=X(t,i,n),e.next=4,a.httpService.get(o);case 4:return u=e.sent,s=u.data,e.abrupt(\"return\",s);case 7:case\"end\":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),pt=function(){var e=ft(regeneratorRuntime.mark((function e(t,r,n,i){var o,u,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r?btoa(JSON.stringify(r)):null,u=$(t,o,n,i),e.next=4,a.httpService.get(u);case 4:return s=e.sent,c=s.data,e.abrupt(\"return\",c);case 7:case\"end\":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}();function vt(e,t,r,n,a,i,o){try{var u=e[i](o),s=u.value}catch(e){return void r(e)}u.done?t(s):Promise.resolve(s).then(n,a)}var ht=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pt(\"TrustedConnectionIndicatorOnUserTileAccess\",null,null,\"connection_social_identity/TrustedConnectionIndicator\");case 3:return t=e.sent,r=\"Granted\"===(null==t?void 0:t.access),e.abrupt(\"return\",r);case 8:return e.prev=8,e.t0=e.catch(0),console.error(e.t0),e.abrupt(\"return\",!1);case 12:case\"end\":return e.stop()}}),e,null,[[0,8]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){vt(i,n,a,o,u,\"next\",e)}function u(e){vt(i,n,a,o,u,\"throw\",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}(),yt=ht;function Et(e,t,r,n,a,i,o){try{var u=e[i](o),s=u.value}catch(e){return void r(e)}u.done?t(s):Promise.resolve(s).then(n,a)}function bt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(\"undefined\"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if(\"string\"==typeof e)return St(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);\"Object\"===r&&e.constructor&&(r=e.constructor.name);if(\"Map\"===r||\"Set\"===r)return Array.from(e);if(\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return St(e,t)}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function St(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var gt=x.FRIENDS_EMPTY;function Rt(r){var n=r.translate,a=r.currentTab,i=r.isMyProfile,o=r.tooltipMsg,u=r.title,s=r.acceptFriendRequest,c=r.declineFriendRequest,l=r.refreshFriendsList,d=r.setFriends,f=(0,e.useContext)(we),m=f.paginatedFriends,p=f.friendRequestIdToUniverseSourceMap,v=[Te.UserProfileField.Names.CombinedName,Te.UserProfileField.Names.Username,Te.UserProfileField.IsVerified,Te.UserProfileField.IsDeleted],h=(0,e.useMemo)((function(){return m.map((function(e){return e.id}))}),[m]),y=(0,Te.useUserProfiles)(h,v).data,E=bt((0,e.useState)(!1),2),b=E[0],S=E[1];(0,e.useEffect)((function(){var e=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yt();case 2:t=e.sent,S(t);case 4:case\"end\":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){Et(i,n,a,o,u,\"next\",e)}function u(e){Et(i,n,a,o,u,\"throw\",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}();e()}),[]);var g=function(e){return e((function(e){d(m.filter((function(t){return t.id!==e})))}))},R=g(s),F=g(c);return t().createElement(\"div\",{className:\"friends-content section\"},t().createElement(Je,{title:u,tooltipMsg:o,currentTab:a,refreshFriendsList:l}),m.length>0?t().createElement(O.AvatarCardList,{data:m},(function(e,r){var n,o,u,s,c,d,f,m,v;return t().createElement(lt,{key:r,currentTab:a,isMyProfile:i,refreshFriendsList:l,position:r,id:e.id,name:null==y||null===(n=y[e.id])||void 0===n?void 0:n.names.username,displayName:null==y||null===(o=y[e.id])||void 0===o?void 0:o.names.combinedName,verifiedBadgeData:{hasVerifiedBadge:null!==(u=null==y||null===(s=y[e.id])||void 0===s?void 0:s.isVerified)&&void 0!==u&&u},isDeleted:null!==(c=null==y||null===(d=y[e.id])||void 0===d?void 0:d.isDeleted)&&void 0!==c&&c,friendRequestSentFromInGame:null!==(null==e||null===(f=e.friendRequest)||void 0===f?void 0:f.sourceUniverseId),friendRequestSentFromQrCode:\"QrCode\"===(null==e||null===(m=e.friendRequest)||void 0===m?void 0:m.originSourceType),friendRequestSentAt:null==e||null===(v=e.friendRequest)||void 0===v?void 0:v.sentAt,sourceUniverse:(null==e?void 0:e.id)in p?p[e.id]:null,mutualFriends:(null==e?void 0:e.mutualFriendsList)||[],presence:e.presence,unfollowFriend:e.unfollowFriend,unfriend:e.unfriend,followFriend:e.followFriend,acceptFriendRequestThenRemoveCard:R,declineFriendRequestThenRemoveCard:F,canAccessTCIndicatorStatus:b})})):t().createElement(\"div\",{className:\"section-content-off\"},\" \",n(gt)))}Rt.defaultProps={},Rt.propTypes={translate:A().func.isRequired,currentTab:A().string.isRequired,isMyProfile:A().bool.isRequired,tooltipMsg:A().string.isRequired,title:A().string.isRequired,acceptFriendRequest:A().func.isRequired,declineFriendRequest:A().func.isRequired,refreshFriendsList:A().func.isRequired,setFriends:A().func.isRequired};var Ft,Tt=(0,D.withTranslations)(ge(Rt),Re);function It(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ct=x.FRIENDTABS,wt={friendshipDestroyed:\"FriendshipDestroyed\",friendshipCreated:\"FriendshipCreated\",friendshipDeclined:\"FriendshipDeclined\",friendshipRequested:\"FriendshipRequested\"},Nt={FRIENDS_NOTIFICATIONS:wt,PRESENCE_NOTIFICATIONS:{presenceChanged:\"PresenceChanged\"},FRIENDS_EVENT_TYPE:\"FriendshipNotifications\",PRESENCE_EVENT_TYPE:\"PresenceBulkNotifications\",TAB_EVENTS_MAP:(Ft={},It(Ft,Ct.FRIENDS,[wt.friendshipDestroyed,wt.friendshipCreated]),It(Ft,Ct.FRIENDREQUESTS,[wt.friendshipRequested,wt.friendshipDeclined,wt.friendshipCreated]),Ft)},At=(h.EnvironmentUrls.friendsApi,h.EnvironmentUrls.premiumFeaturesApi,h.EnvironmentUrls.usersApi,h.EnvironmentUrls.gamesApi,h.EnvironmentUrls.contactsApi,h.EnvironmentUrls.accountSettingsApi,h.EnvironmentUrls.authApi,h.EnvironmentUrls.tradesApi,h.EnvironmentUrls.apiGatewayUrl),Ot=(h.EnvironmentUrls.chatApi,function(){return{url:\"\".concat(At,\"/user-blocking-api/v1/users/batch-check-reciprocal-block\"),withCredentials:!0}}),Dt=function(e,t,r,n){return new(r||(r=Promise))((function(a,i){function o(e){try{s(n.next(e))}catch(e){i(e)}}function u(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,u)}s((n=n.apply(e,t||[])).next())}))},Pt=function(e,t){var r,n,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},\"function\"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError(\"Generator is already executing.\");for(;o;)try{if(r=1,n&&(a=2&i[0]?n.return:i[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,i[1])).done)return a;switch(n=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,n=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],n=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},Lt=function(e){return Dt(void 0,void 0,Promise,(function(){var t;return Pt(this,(function(r){switch(r.label){case 0:return t=parseInt(h.CurrentUser.userId,10),Number.isNaN(t)||!t?[2,{users:[{isBlocked:!1,isBlockingViewer:!1,userId:0}]}]:[4,a.httpService.post(Ot(),{userIds:e,requesterUserId:t})];case 1:return[2,r.sent().data]}}))}))};function qt(e,t,r,n,a,i,o){try{var u=e[i](o),s=u.value}catch(e){return void r(e)}u.done?t(s):Promise.resolve(s).then(n,a)}function Ut(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){qt(i,n,a,o,u,\"next\",e)}function u(e){qt(i,n,a,o,u,\"throw\",e)}o(void 0)}))}}var xt=function(){var e=Ut(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,mt(\"MustHideConnections\",[{name:\"vieweeUserId\",type:\"UserId\",value:\"\".concat(t)}]);case 3:return r=e.sent,e.abrupt(\"return\",\"Granted\"===(null==r?void 0:r.access));case 7:e.prev=7,e.t0=e.catch(0),console.debug(e.t0);case 10:return e.abrupt(\"return\",!0);case 11:case\"end\":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),_t=function(){var e=Ut(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Lt([parseInt(t,10)]);case 3:if(!(null!=(r=e.sent)&&r.users&&r.users.length>0)){e.next=6;break}return e.abrupt(\"return\",r.users[0].isBlockingViewer);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.debug(e.t0);case 11:return e.abrupt(\"return\",!0);case 12:case\"end\":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();function Mt(e,t,r,n,a,i,o){try{var u=e[i](o),s=u.value}catch(e){return void r(e)}u.done?t(s):Promise.resolve(s).then(n,a)}function kt(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){Mt(i,n,a,o,u,\"next\",e)}function u(e){Mt(i,n,a,o,u,\"throw\",e)}o(void 0)}))}}function jt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Bt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jt(Object(r),!0).forEach((function(t){Gt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Gt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Qt=q.dataStores.userDataStore,Wt=x.MAX_PER_PAGE,Ht=x.FRIENDTABS,Vt=x.SORT_ORDER,Yt=x.CACHE_CRITERIA,Jt=Nt.TAB_EVENTS_MAP,zt=Nt.FRIENDS_EVENT_TYPE,Xt=!h.CurrentUser.isAuthenticated,$t=function(){var e=kt(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=2;break}return e.abrupt(\"return\",!1);case 2:return e.next=4,_t(t);case 4:if(!e.sent){e.next=6;break}return e.abrupt(\"return\",!0);case 6:return e.abrupt(\"return\",xt(t));case 7:case\"end\":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Kt=function(e){var t=e.currentTab,r=e.profileUserId,n=e.currentCursor,a=e.useCache,i=e.refreshCache,o=void 0!==i&&i,u=e.fetchMutualFriends,s=void 0!==u&&u,c=e.isMyProfile,l=void 0!==c&&c,d=e.friendsNameFilter,f=void 0===d?null:d,m=e.queryChanged,p=void 0!==m&&m,v=new Promise((function(){return{friendsData:[]}})),h=function(e){var t=e.userData,r=e.prevCursor,n=e.nextCursor,a=[];if(t&&t.length>0)for(var i=0;i<t.length;i++){var o,u,s=null===(o=t[i])||void 0===o||null===(u=o.presence)||void 0===u?void 0:u.universeId;s&&a.push(s)}return a.length>0?ye.getGamePlayabilities(a).then((function(e){var a=e.data,i={};if(a&&a.length)for(var o=0;o<a.length;o++){var u=a[o];i[u.universeId]=u.isPlayable}return t.forEach((function(e){e.presence&&(e.presence.isPlayable=i[e.presence.universeId])})),{friendsData:t,prev:r,next:n}})).catch((function(){return{friendsData:t,prev:r,next:n}})):{friendsData:t,prev:r,next:n}},y=function(){var e=kt(regeneratorRuntime.mark((function e(t){var r,n,a,i,o,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.userData,n=t.prevCursor,a=t.nextCursor,e.prev=1,e.next=4,$e().getPresenceProvider().getPresences(r.map((function(e){return e.id})));case 4:return i=e.sent,o=new Map(i.map((function(e){return[e.userId,e]}))),u=r.map((function(e){var t;return Bt(Bt({},e),{},{presence:null!==(t=o.get(e.id))&&void 0!==t?t:{}})})),e.abrupt(\"return\",{userData:u,prevCursor:n,nextCursor:a});case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt(\"return\",{userData:r,prevCursor:n,nextCursor:a});case 13:case\"end\":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=kt(regeneratorRuntime.mark((function e(t){var n,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.userData,a=t.prevCursor,i=t.nextCursor,e.next=3,$t(r,l);case 3:if(!e.sent){e.next=5;break}return e.abrupt(\"return\",{userData:[],prevCursor:null,nextCursor:null});case 5:return e.abrupt(\"return\",{userData:n,prevCursor:a,nextCursor:i});case 6:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){return Bt(Bt({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt),{},{CACHE_CRITERIA:Yt})}({useCache:a,refreshCache:o});switch(t){case Ht.FRIENDS:v=null==f||\"\"===f?ye.getPaginatedFriends(r,0===n||p?\"\":n,l,p).then((function(e){return{userData:e.data.PageItems,prevCursor:e.data.PreviousCursor,nextCursor:e.data.NextCursor}})).then(E).then(y).then(h):ye.getSearchedFriends(r,0===n||p?\"\":n,f,p).then((function(e){return{userData:e.data.PageItems,prevCursor:e.data.PreviousCursor,nextCursor:e.data.NextCursor}})).then(E).then(y).then(h);break;case Ht.FOLLOWERS:v=Qt.getFollowers({userId:r,cursor:n,sortOrder:Vt.desc,limit:Wt,isGuest:Xt},b).then(E).then(h);break;case Ht.FOLLOWING:v=Qt.getFollowings({userId:r,cursor:n,sortOrder:Vt.desc,limit:Wt,isGuest:Xt},b).then(E).then(h);break;case Ht.FRIENDREQUESTS:(0===n||p)&&ye.clearNewFriendRequests(),v=Qt.getFriendsRequests({userId:r,cursor:n,limit:Wt,fetchMutualFriends:s,isGuest:Xt},b).then(h);break;default:return v.catch(console.debug)}return v.catch(console.debug)};function Zt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(\"undefined\"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if(\"string\"==typeof e)return er(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);\"Object\"===r&&e.constructor&&(r=e.constructor.name);if(\"Map\"===r||\"Set\"===r)return Array.from(e);if(\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return er(e,t)}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function er(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var tr=Kt,rr=function(e,t){if(Xt)return function(){};var r=function(r){r&&r.Type&&Jt[e].includes(r.Type)&&t(r.Type)},n=h.RealTime.Factory.GetClient();return n.Subscribe(zt,r),function(){n.Unsubscribe(zt,r)}},nr=x.START_PAGE,ar=x.MAX_PER_PAGE,ir=x.FRIENDTABS,or=x.SORT_OPTIONS,ur=x.EVENTS,sr=x.FRIENDS_REQUEST_LIST_CONTEXT,cr=x.DEVICE_TYPES;function lr(r){var n=r.currentTab,a=r.metadata,i=a.profileUserId,o=a.isMyProfile,u=a.onlyShowContents,s=r.friends,c=r.setFriends,l=r.loadMoreFriends,d=r.tooltipMsg,f=r.title,m=r.enableTabLoader,p=r.disableTabLoader,v=(r.tabLoader,Zt((0,e.useState)(nr),2)),y=v[0],E=v[1],b=Zt((0,e.useState)(0),2),S=b[0],g=b[1],R=Zt((0,e.useState)(null),2),F=R[0],T=R[1],I=(0,e.useContext)(we),C=I.friendsCount,w=I.setFriendsCount,N=I.friendsNameFilter,A=I.setFriendsNameFilter,D=I.friendsStatusFilter,P=I.setFriendsStatusFilter,L=I.friendsSort,q=I.paginatedFriends,U=I.setPaginatedFriends,x=I.setFriendRequestIdToUniverseSourceMap,_=Fe.deviceMeta.getDeviceMeta(),M=(null==_?void 0:_.isDesktop)&&(null==_?void 0:_.deviceType)===cr.computer,k=\"%2c\";(0,e.useEffect)((function(){if(n===ir.FRIENDREQUESTS&&0!==q.length){var e=q.filter((function(e){return e&&e.friendRequest&&e.friendRequest.sourceUniverseId})).map((function(e){return e.friendRequest.sourceUniverseId}));0!==e.length&&ye.getGames(e).then((function(e){var t;if(null!=e&&null!==(t=e.data)&&void 0!==t&&t.data){var r=e.data.data,n=q.reduce((function(e,t){var n;if(null!=t&&null!==(n=t.friendRequest)&&void 0!==n&&n.sourceUniverseId){var a=t.friendRequest.sourceUniverseId,i=r.find((function(e){return e.id===a}));i&&(e[t.id]=i)}return e}),{});x(n)}}))}}),[q,n]),n===ir.FRIENDS&&(L===or.ALPHABETICAL?s.sort((function(e,t){if(h.DisplayNames.Enabled()){if(e.displayName.toLowerCase()<t.displayName.toLowerCase())return-1;if(e.displayName.toLowerCase()>t.displayName.toLowerCase())return 1}else{if(e.name.toLowerCase()<t.name.toLowerCase())return-1;if(e.name.toLowerCase()>t.name.toLowerCase())return 1}return 0})):L===or.STATUS&&s.sort((function(e,t){if(e.presence.userPresenceType===t.presence.userPresenceType)if(h.DisplayNames.Enabled()){if(e.displayName.toLowerCase()<t.displayName.toLowerCase())return-1;if(e.displayName.toLowerCase()>t.displayName.toLowerCase())return 1}else{if(e.name.toLowerCase()<t.name.toLowerCase())return-1;if(e.name.toLowerCase()>t.name.toLowerCase())return 1}return 2===e.presence.userPresenceType?-1:2===t.presence.userPresenceType||e.presence.userPresenceType<t.presence.userPresenceType?1:e.presence.userPresenceType>t.presence.userPresenceType?-1:0})));var j=function(e,t){if(n===ir.FRIENDREQUESTS){var r=t.slice((e-1)*ar,e*ar).length,a={currentUserId:parseInt(i,10),pageNumber:e,numberOfFriendRequestsCurrentlyDisplayed:r};h.EventStream.SendEvent(ur.FRIEND_REQUESTS_DISPLAYED,sr,a);var o=t.map((function(e){return e.friendRequest.senderId})).join(k),u=t.map((function(e){return e.mutualFriendsList&&e.mutualFriendsList.length>0?\"T\":\"F\"})).join(k),s=t.map((function(e){return e.friendRequest&&e.friendRequest.sourceUniverseId?\"T\":\"F\"})).join(k),c=Array.from({length:t.length},(function(e,t){return t+1})).join(k);h.EventStream.SendEvent(ur.FRIENDS_LANDING_PAGE_LOAD,\"friendsLanding\",{target:\"www\",requestingUserId:o,mutualFriendsContext:u,gamesContext:s,absPosition:c})}},B=s.slice((y-1)*ar,y*ar);(0,e.useEffect)((function(){JSON.stringify(q)!==JSON.stringify(B)&&U(B)}),[s,N,D,L,y]);var G=Zt((0,e.useState)(JSON.stringify(s)),2),Q=G[0],W=G[1],H=Math.max(Math.ceil(s.length/ar),1),V=F||y>nr||H>1||C>ar,Y=!!F||y<H;y>H&&E(H);var J=function(){m();var e=function(e){var t=e.friendsData,r=e.next;c(t),T(r),p()};tr({currentTab:ir.FRIENDS,profileUserId:i,useCache:!1,refreshCache:!0,isMyProfile:o,friendsNameFilter:N}).then((function(t){ir.FRIENDS===n&&e(t)})),tr({currentTab:ir.FRIENDREQUESTS,profileUserId:i,currentCursor:S,useCache:!1,refreshCache:!0,isMyProfile:o,friendsNameFilter:N}).then((function(t){ir.FRIENDREQUESTS===n&&e(t)}))};(0,e.useEffect)((function(){m(),c([]),w(0),A(null),P(null)}),[]),(0,e.useEffect)((function(){if(null!=N){E(nr),T(null);var e=!0;m();var t=rr(n,J);return tr({currentTab:n,profileUserId:i,currentCursor:S,useCache:!1,isMyProfile:o,friendsNameFilter:N,queryChanged:!0}).then((function(t){var r=t.friendsData,n=t.next;e&&(c(r),T(n),p(),j(y,r))})),function(){e=!1,t()}}return function(){}}),[N]),(0,e.useEffect)((function(){var e=!0;m();var t=rr(n,J);return tr({currentTab:n,profileUserId:i,currentCursor:S,useCache:!1,isMyProfile:o,friendsNameFilter:N}).then((function(t){var r=t.friendsData,n=t.next;e&&(l(r),T(n),p(),j(y,r))})),function(){e=!1,t()}}),[n,S,i]),(0,e.useEffect)((function(){F&&!S&&g(F)}),[F,S]),(0,e.useEffect)((function(){var e=!0;return function(){var t=JSON.stringify(s);if(Q!==t)switch(W(t),n){case ir.FRIENDS:ye.getFriendsCount(i).then((function(t){var r=t.data.count;e&&w(r)}));break;case ir.FOLLOWING:ye.getFollowingsCount(i).then((function(t){var r=t.data.count;e&&w(r)}));break;case ir.FOLLOWERS:ye.getFollowersCount(i).then((function(t){var r=t.data.count;e&&w(r)}));break;case ir.FRIENDREQUESTS:o&&ye.getFriendsRequestCount().then((function(t){var r=t.data.count;if(e){w(r);var n={currentUserId:parseInt(i,10),numberOfFriendRequests:r};h.EventStream.SendEvent(ur.TOTAL_FRIEND_REQUESTS_RETRIEVED,sr,n)}}))}}(),function(){e=!1}}),[n,s]);var z=V?\"mutual-friends-extra-padding-with-pagination\":\"mutual-friends-extra-padding-without-pagination\";return t().createElement(t().Fragment,null,t().createElement(Tt,{isMyProfile:o,tooltipMsg:d,title:f,currentTab:n,onlyShowContents:u,refreshFriendsList:J}),V&&t().createElement(O.Pagination,{current:y,hasNext:Y,onChange:function(e){e>y&&e>=H&&F&&g(F||0),E(e),j(e,s)}}),n===ir.FRIENDREQUESTS&&!M&&t().createElement(\"div\",{className:z}))}lr.defaultProps={friends:[]},lr.propTypes={friends:A().arrayOf(A().any),setFriends:A().func.isRequired,loadMoreFriends:A().func.isRequired,metadata:A().objectOf(A().any).isRequired,tooltipMsg:A().string.isRequired,title:A().string.isRequired,currentTab:A().string.isRequired,enableTabLoader:A().func.isRequired,disableTabLoader:A().func.isRequired,tabLoader:A().objectOf(A().any).isRequired};var dr=ge(lr),fr=function(e){var r=e.title,n=e.show;return t().createElement(\"div\",{className:\"page-header section\"},n&&t().createElement(\"div\",{className:\"container-header\"},t().createElement(\"h1\",{className:\"friends-title\"},r)))};fr.propTypes={title:A().string.isRequired,show:A().bool.isRequired};var mr,pr=fr,vr=h.EnvironmentUrls.apiGatewayUrl,hr=function(){return vr+\"/product-experimentation-platform/v1/projects/1/layers/Social.Friends/values\"},yr=function(e){var t={url:hr(),timeout:2e3,withCredentials:!0},r={parameters:e.join(\",\")};return a.httpService.get(t,r)};!function(e){e.FriendRecommendationSource=\"friend_recommendation_source\",e.JoinButtonFriendCard=\"show_join_game_button_in_friend_card\",e.JoinButtonFriendCardDesktopOnly=\"show_join_game_button_in_friend_card_desktop_only\"}(mr||(mr={}));var Er=mr,br=\"friendRecommendations\",Sr=\"accept\",gr=\"request\",Rr=\"displayed\";var Fr={emitCarouselDisplayedEvent:function(e,t,r){h.EventStream.SendEvent(br,Rr,{uid:e,numberOfRecommendations:r,variant:t})},emitAcceptedFriendRequestEvent:function(e,t){h.EventStream.SendEvent(br,Sr,{uid:e,recipientId:t})},emitFriendRequestSentEvent:function(e,t){h.EventStream.SendEvent(br,gr,{uid:e,recipientId:t})}},Tr=h.EnvironmentUrls.friendsApi;var Ir={getFriendRecommendations:function(e){var t={retryable:!0,withCredentials:!0,url:\"\".concat(Tr,\"/v1/users/\").concat(e,\"/friends/recommendations\")};return a.httpService.get(t).then((function(e){return e.data.data.map((function(e){return{userName:e.name,displayName:e.displayName,userId:e.id,pendingRequest:null!=e.friendRequest,mutualFriendsList:e.mutualFriendsList}}))}))},sendOrAcceptFriendRequest:function(e,t){return t?function(e){var t={retryable:!1,withCredentials:!0,url:\"\".concat(Tr,\"/v1/users/\").concat(e,\"/accept-friend-request\")},r=a.httpService.post(t);return r.then((function(){return Fr.emitAcceptedFriendRequestEvent(h.CurrentUser.userId,e)}),(function(){})),r}(e):function(e){var t={retryable:!1,withCredentials:!0,url:\"\".concat(Tr,\"/v1/users/\").concat(e,\"/request-friendship\")},r=a.httpService.post(t,{friendshipOriginSourceType:\"recommendations\"});return r.then((function(){return Fr.emitFriendRequestSentEvent(h.CurrentUser.userId,e)}),(function(){})),r}(e)},getFriendCount:function(e){var t={retryable:!0,withCredentials:!0,url:\"\".concat(Tr,\"/v1/users/\").concat(e,\"/friends/count\")};return a.httpService.get(t)}};function Cr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(\"undefined\"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if(\"string\"==typeof e)return wr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);\"Object\"===r&&e.constructor&&(r=e.constructor.name);if(\"Map\"===r||\"Set\"===r)return Array.from(e);if(\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wr(e,t)}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function wr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Nr=t().useState,Ar=x.PLUS_SIGN,Or=x.MUTUAL_FRIENDS_SHOW_COUNT;function Dr(e){var r=e.userId,n=e.userName,i=e.displayName,o=e.pendingRequest,u=e.mutualFriends,s=e.setError,c=e.translate,l=Cr(Nr(!1),2),d=l[0],f=l[1],m=null!=u&&u.length>0;var p;return t().createElement(\"div\",{className:\"friend-recommendation-item\"},t().createElement(\"a\",{href:h.Endpoints.getAbsoluteUrl(\"/users/\".concat(r,\"/profile\")),className:\"friend-recommendation-link\"},t().createElement(\"span\",{className:\"avatar-container avatar-headshot text-link\"},t().createElement(ze.Thumbnail2d,{type:ze.ThumbnailTypes.avatarHeadshot,size:ze.ThumbnailAvatarHeadshotSize.size96,targetId:r,imgClassName:\"avatar-card-image\"})),t().createElement(\"div\",{className:\"friend-recommendation-info\"},t().createElement(\"span\",{className:\"text-overflow friend-name font-caption-header friend-recommendation-name\"},i),t().createElement(\"span\",{className:\"text-overflow text-secondary friend-recommendation-name\"},a.concatTexts.concat([\"\",n],a.concatTexts.connectors.at,!1)),o&&d?t().createElement(\"span\",{className:\"text-overflow text-secondary friend-recommendation-name\"},c(\"Label.YouAreFriends\")):m&&(p=function(e){var r=e.slice(0,Or).map((function(e){return t().createElement(\"li\",{className:\"text-overflow\"},e)}));if(e.length>Or){var n=e.length-Or,a=c(\"Message.More\",{plusSign:Ar,remainingCount:n});r.push(t().createElement(\"li\",{className:\"text-overflow\"},a))}return r}(u),t().createElement(O.Tooltip,{id:\"mutual-friends-tooltip\",placement:\"bottom\",content:p},t().createElement(\"span\",{className:\"text-overflow text-secondary mutual-friends-tooltip-label friend-recommendation-name\"},c(\"Label.MutualFriend\",{mutualFriendsCount:u.length})))))),!(o&&d)&&t().createElement(\"button\",{type:\"button\",className:L()(\"btn-control-md full-size add-friend-button \",{disabled:d}),onClick:function(){return s(\"\"),void Ir.sendOrAcceptFriendRequest(r,o).then((function(){return f(!0)}),(function(e){var t,r;null!=e&&null!==(t=e.data)&&void 0!==t&&null!==(r=t.errors[0])&&void 0!==r&&r.userFacingMessage?s(e.data.errors[0].userFacingMessage):s(c(\"Label.MiscError\"))}))}},t().createElement(\"span\",{className:d?\"icon-sandglass\":o?\"icon-acceptfriend\":\"icon-addfriend\"})))}Dr.defaultProps={mutualFriends:[]},Dr.propTypes={userId:A().number.isRequired,userName:A().string.isRequired,displayName:A().string.isRequired,pendingRequest:A().bool.isRequired,mutualFriends:A().arrayOf(A().string),setError:A().func.isRequired,translate:A().func.isRequired};var Pr=Dr;function Lr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(\"undefined\"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if(\"string\"==typeof e)return qr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);\"Object\"===r&&e.constructor&&(r=e.constructor.name);if(\"Map\"===r||\"Set\"===r)return Array.from(e);if(\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qr(e,t)}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function qr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ur=t().useState,xr=t().useEffect,_r=t().useRef;function Mr(e){var r=e.friendRecommendations,n=e.translate,a=e.setError,i=e.cardWidth,o=e.contentWidth,u=Lr(Ur(0),2),s=u[0],c=u[1],l=Lr(Ur(0),2),d=l[0],f=l[1],m=Lr(Ur(!1),2),p=m[0],v=m[1],h=Lr(Ur(!0),2),y=h[0],E=h[1],b=Lr(Ur(-1),2),S=b[0],g=b[1],R=_r(null),F=_r(null),T=function(){return Math.floor(o(R)/i(F))};xr((function(){i(F)&&f(-s*i(F))}),[s,S]),xr((function(){v(i(F)&&i(F)*r.length>o(R))}),[i.current,o.current,S]),xr((function(){!p&&s>0&&c(0)}),[p,s]),xr((function(){window.addEventListener(\"resize\",(function(){g(window.innerWidth),E(!1)})),g(0)}),[]);var I=[];r.forEach((function(e){I.push(t().createElement(\"li\",{ref:F,\"user-id\":e.userId,className:\"list-item friend-recommendations-list-item\"},t().createElement(Pr,{userId:e.userId,userName:e.userName,displayName:e.displayName,pendingRequest:e.pendingRequest,mutualFriends:e.mutualFriendsList,setError:a,translate:n})))}));var C=function(e){i(F)&&(e?c(Math.max(0,s-T())):s+T()<I.length&&c(s+T()),E(!0))},w=function(e){var t=\"\";return p?(e&&0===s||!e&&s+T()>=I.length)&&(t=\" disabled\"):t=\" hidden\",\"scroller\".concat(e?\"\":\" next\").concat(t)};return t().createElement(\"div\",{className:L()(\"section-content remove-panel friend-recommendations-content\",{\"friend-recommendations-content-with-scrollers\":p})},t().createElement(\"button\",{type:\"button\",className:w(!0),onClick:function(){return C(!0)}},t().createElement(\"div\",{className:\"arrow\"},t().createElement(\"span\",{className:\"icon-games-carousel-left\"}))),t().createElement(\"div\",{ref:R,className:L()(\"friend-recommendations-container\",{\"animate-scroll\":y}),style:{left:\"\".concat(d,\"px\")}},t().createElement(\"ul\",{className:\"hlist\"},I)),t().createElement(\"button\",{type:\"button\",className:w(!1),onClick:function(){return C(!1)}},t().createElement(\"div\",{className:\"arrow\"},t().createElement(\"span\",{className:\"icon-games-carousel-right\"}))))}Mr.propTypes={friendRecommendations:A().array.isRequired,translate:A().func.isRequired,setError:A().func.isRequired,cardWidth:A().func,contentWidth:A().func},Mr.defaultProps={cardWidth:function(e){var t,r;return null==e||null===(t=e.current)||void 0===t||null===(r=t.getBoundingClientRect())||void 0===r?void 0:r.width},contentWidth:function(e){var t,r;return null==e||null===(t=e.current)||void 0===t||null===(r=t.getBoundingClientRect())||void 0===r?void 0:r.width}};var kr,jr=Mr;!function(e){e.None=\"none\",e.Frequents=\"frequents\"}(kr||(kr={}));var Br=kr;function Gr(e,t,r,n,a,i,o){try{var u=e[i](o),s=u.value}catch(e){return void r(e)}u.done?t(s):Promise.resolve(s).then(n,a)}function Qr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(\"undefined\"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if(\"string\"==typeof e)return Wr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);\"Object\"===r&&e.constructor&&(r=e.constructor.name);if(\"Map\"===r||\"Set\"===r)return Array.from(e);if(\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wr(e,t)}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function Wr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Hr=t().useState,Vr=t().useEffect,Yr=Qr((0,O.createModal)(),2),Jr=Yr[0],zr=Yr[1];function Xr(e){var r=e.translate,n=Qr(Hr([]),2),a=n[0],i=n[1],o=Qr(Hr(!1),2),u=o[0],s=o[1],c=Qr(Hr(\"\"),2),l=c[0],d=c[1];return Vr((function(){var e;(e=regeneratorRuntime.mark((function e(){var t,r,n,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,yr([Er.FriendRecommendationSource]);case 3:if(r=e.sent,null===(t=r.data)||void 0===t||!t[Er.FriendRecommendationSource]||r.data[Er.FriendRecommendationSource]===Br.None){e.next=13;break}return e.next=7,Ir.getFriendCount(h.CurrentUser.userId);case 7:if(a=e.sent,!(void 0!==(null===(n=a.data)||void 0===n?void 0:n.count)&&a.data.count<200)){e.next=13;break}return e.next=11,Ir.getFriendRecommendations(h.CurrentUser.userId);case 11:(o=e.sent).length>0&&(s(!0),i(o),Fr.emitCarouselDisplayedEvent(h.CurrentUser.userId,r.data[Er.FriendRecommendationSource],o.length));case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.error(e.t0);case 18:case\"end\":return e.stop()}}),e,null,[[0,15]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){Gr(i,n,a,o,u,\"next\",e)}function u(e){Gr(i,n,a,o,u,\"throw\",e)}o(void 0)}))})()}),[]),Vr((function(){\"\"!==l&&zr.open().catch((function(){return d(\"\")}))}),[l]),u?t().createElement(\"div\",{className:\"section col-xs-12 friend-recommendations-section\"},t().createElement(\"div\",{className:\"container-header\"},t().createElement(\"h4\",null,r(\"Label.FriendRecommendationsHeader\"))),t().createElement(jr,{friendRecommendations:a,translate:r,setError:d}),t().createElement(Jr,{title:r(\"Label.ErrorHeader\"),body:l,neutralButtonText:r(\"Action.OK\")})):t().createElement(\"div\",null)}Xr.propTypes={translate:A().func.isRequired};var $r=Xr;function Kr(e){var r=e.translate;return t().createElement($r,{translate:r})}Kr.propTypes={translate:A().func.isRequired};var Zr=(0,D.withTranslations)(Kr,{common:[],feature:\"Feature.FriendRecommendations\"});function en(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(\"undefined\"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if(\"string\"==typeof e)return tn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);\"Object\"===r&&e.constructor&&(r=e.constructor.name);if(\"Map\"===r||\"Set\"===r)return Array.from(e);if(\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tn(e,t)}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function tn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var rn=x.FRIENDTABS,nn=x.FRIENDS_ERROR,an=x.SORT_OPTIONS,on=h.CurrentUser.userId,un=en((0,O.createModal)(),2),sn=un[0],cn=un[1];function ln(r){var n,a=r.translate,i=r.metadata,o=i.isMyProfile,u=i.profileUserId,s=i.userName,c=i.displayName,l=i.isFriendsFilterBarEnabled,d=i.isFriendsPageSortExperimentEnabled,f=i.isSortFriendsInApiExperimentEnabled,m=(i.shouldDisplayFriendRequestContext,r.setMetadata),p=r.errorType,v=r.clearError;if((0,e.useEffect)((function(){document.title=\"\".concat(a(\"Label.Connections\"),\" - Roblox\")}),[a]),o)n=a(\"Heading.MyConnections\");else{var y=null!==h.DisplayNames&&void 0!==h.DisplayNames&&h.DisplayNames.Enabled()?c:s;n=a(\"Heading.UsersConnections\",{username:y})}var E=nn[p]||{},b=en((0,e.useState)(!1),2),S=b[0],g=b[1],R=(0,e.useContext)(we),F=R.setFriendsSort,T=R.setFilterBarEnabled,I=R.setShowJoinGameButtonInFriendCardDesktopOnly,C=R.showFriendRecs;(0,e.useEffect)((function(){ye.getMetadata(u).then((function(e){var t=e.data;m(t)}))}),[]),(0,e.useEffect)((function(){T(l)}),[l]),(0,e.useEffect)((function(){yr([Er.JoinButtonFriendCard,Er.JoinButtonFriendCardDesktopOnly]).then((function(e){var t=e.data;F(an.API),null!=t&&t[Er.JoinButtonFriendCardDesktopOnly]&&I(t[Er.JoinButtonFriendCardDesktopOnly])})).catch((function(){F(an.ALPHABETICAL),I(!1)})).finally((function(){g(!0)}))}),[d,f]),(0,e.useEffect)((function(){p&&cn.open().catch((function(){v()}))}),[p]);var w,N=[{id:\"friends\",path:\"/friends\",title:\"Label.Connections\",name:rn.FRIENDS,tooltipMsg:\"Message.ConnectionsTabTooltip\",isDefault:!0,show:null!=on},{id:\"following\",path:\"/following\",title:\"Label.Following\",name:rn.FOLLOWING,tooltipMsg:\"Message.FollowingTabTooltip\"},{id:\"followers\",path:\"/followers\",title:\"Label.Followers\",name:rn.FOLLOWERS,tooltipMsg:\"Message.FollowerTabTooltip\"},{id:\"requests\",path:\"/friend-requests\",title:\"Label.Requests\",name:rn.FRIENDREQUESTS,tooltipMsg:\"Message.ConnectionsTabTooltip\",show:o}];return w=S?N.reduce((function(e,r){var n=r.path,i=r.title,u=r.name,s=r.tooltipMsg,c=r.show,l=void 0===c||c,d=r.isDefault,f=r.id;return l&&e.push(t().createElement(O.SimpleTabs.Tab,{id:f,key:u,path:n,title:a(i),className:L()({\"subtract-item\":!o,\"signed-out\":!on}),name:u,isDefault:d},t().createElement(dr,{title:a(i),currentTab:u,tooltipMsg:a(s)}))),e}),[]):null,t().createElement(\"div\",{className:\"row page-content\"},t().createElement(pr,{title:n,show:!0}),t().createElement(sn,{title:p&&a(E.titleText),body:p&&a(E.bodyText),neutralButtonText:p&&a(E.neutralButtonText),footerText:p&&E.footerText&&a(E.footerText)}),C&&t().createElement(Zr,null),t().createElement(O.SimpleTabs,{type:O.SimpleTabs.types.Hash,hashType:\"hashbang\",isScrollable:!0},w),t().createElement(\"div\",{id:\"react-captcha-container\"}))}ye.setUserId(on),ln.defaultProps={metadata:{},errorType:null},ln.propTypes={translate:A().func.isRequired,metadata:A().objectOf(A().any),setMetadata:A().func.isRequired,errorType:A().string,clearError:A().func.isRequired};var dn=(0,D.withTranslations)(ge(ln),Re),fn=(0,i.createStore)(w,(0,i.applyMiddleware)(u()));(0,a.ready)((function(){(0,n.render)(t().createElement(s.Provider,{store:fn},t().createElement(Ne,null,t().createElement(dn,null))),document.getElementById(\"friends-container\")||document.getElementById(\"friends-web-app\"))}))}()}();\n//# sourceMappingURL=https://sourcemaps.rbxcdn.com/abdcd4a7a6d0a7a47310dacbf6dd82af-friends.bundle.min.js.map\n\n/* Bundle detector */\nwindow.Roblox && window.Roblox.BundleDetector && window.Roblox.BundleDetector.bundleDetected(\"Friends\");"
  }
}